# 🎮 增长黑客游戏 - AI驱动增强设计方案

## 用户反馈
"太简单了，让用户输入太少了，可以调用api的，让用户有互动体验"

## 🎯 设计目标

打造一个**深度互动的文字冒险式增长模拟器**，参考：
- 互动小说/文字冒险游戏的对话系统
- AI 驱动的动态场景生成
- 多角色 NPC 互动
- 自由文本输入 + 预设选项结合

---

## 🆕 核心改进

### 1. AI 对话系统

**集成 Claude API**，实现：
- 用户可以**自由输入**任何增长策略想法
- AI 扮演多个角色：
  - 🧑‍💼 CEO（你的老板）
  - 💰 投资人（资源提供者）
  - 👥 团队成员（执行者）
  - 😊 用户（反馈者）
  - 🤖 增长顾问（AI助手）

**对话流程**：
```
[场景] CEO: "我们的月活用户停滞在5000，你有什么增长策略？"

[用户输入框] > "我想通过内容营销和SEO来获取自然流量"

[AI分析]
增长顾问: "不错的想法！让我们深入分析一下："
- 优势：成本较低，长期效果好
- 劣势：见效慢，需要3-6个月
- 资源需求：需要1名内容编辑，预算$2000/月
- 风险：SEO算法变化，竞争激烈

[多轮对话]
增长顾问: "你打算创作什么类型的内容？"
用户输入: > "行业案例分析和教程"

增长顾问: "很好！需要考虑："
1. 目标关键词是什么？
2. 更新频率？（每周？每天？）
3. 分发渠道？（自有博客？Medium？）

[用户继续输入或选择预设选项]
```

---

### 2. 自由输入 + 预设选项混合

**模式A：自由探索模式**
- 用户可以输入任何想法
- AI 实时评估可行性
- 给出优缺点分析
- 提出追问引导思考

**模式B：辅助模式**
- 如果用户没想法，显示3-4个预设建议
- 用户选择后还可以继续细化
- 类似对话树但更灵活

**UI设计**：
```
┌─────────────────────────────────────────┐
│ [场景描述]                               │
│ 当前状态：用户5000，收入$10000，预算$5000│
│                                         │
│ CEO: "我们需要在3个月内达到20000用户"    │
│                                         │
│ 你的策略是什么？                         │
│ ┌─────────────────────────────────────┐ │
│ │ 💭 输入你的想法...                  │ │
│ │ [文本输入框，支持多行]               │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ 💡 需要灵感？点击查看建议：              │
│ [内容营销] [社交广告] [产品优化] [其他]  │
└─────────────────────────────────────────┘
```

---

### 3. 多轮对话决策

**不再是一次性选择，而是多轮对话**：

**示例对话链**：
```
第1轮：提出策略
用户: "我想做病毒营销活动"

第2轮：AI追问细节
AI: "好主意！病毒营销的核心是什么？
     A) 设计分享激励机制？
     B) 创造有趣的内容？
     C) 利用现有用户网络？
     或者告诉我你的具体想法 > [输入框]"

第3轮：用户细化
用户: "我想做一个推荐奖励计划，推荐人和被推荐人都能获得7天会员"

第4轮：AI挑战
AI: "让我扮演投资人质疑你："
投资人: "这个成本太高了！每个新用户要送14天会员（推荐人+被推荐人），
         CAC会爆炸。你如何确保ROI？"
[用户必须回答] > [输入框]

第5轮：用户辩护
用户: "7天会员成本低，但能提高激活率。我预计转化率15%，LTV是$100"

第6轮：AI评估
AI: "计算中..."
✅ ROI评估：正收益
✅ 可行性：高
⚠️ 风险：需要防止刷量
💡 建议：加入反作弊机制

是否执行？
[执行] [修改方案] [放弃]
```

---

### 4. 动态场景生成（AI驱动）

**不再是固定的6个关卡，而是动态剧情**：

**AI 根据以下因素生成场景**：
- 当前指标（用户、收入、增长率）
- 历史决策
- 行业趋势
- 随机事件

**场景示例**：
```
[突发事件 - AI生成]
📰 新闻：你的竞争对手刚获得A轮融资$5M，宣布免费策略

团队成员: "老板，我们怎么办？很多用户在社交媒体上讨论要不要转投竞品"
投资人: "我只给你2周时间应对，否则下一轮融资就别想了"

[压力指数上升]
你的决策：
> [自由输入你的应对策略]

[AI会根据你的策略模拟结果并继续剧情]
```

---

### 5. NPC 角色系统

**每个角色有独特性格和立场**：

**CEO (老板)**：
- 性格：激进、关注增长数字
- 立场：要结果不管过程
- 互动："我不管你怎么做，3个月内用户必须翻倍"

**投资人**：
- 性格：谨慎、关注ROI
- 立场：追求健康增长
- 互动："这个CAC太高了，你的单位经济模型不可持续"

**CTO (技术负责人)**：
- 性格：完美主义、讨厌技术债
- 立场：反对快速迭代
- 互动："你又要加新功能？我们的技术债已经堆成山了！"

**用户代表**：
- 性格：挑剔、真实
- 立场：产品体验优先
- 互动："你们的新功能太复杂了，我就想要简单好用的"

**增长顾问 (AI助手)**：
- 性格：理性、客观
- 立场：教育和指导
- 互动：给出数据分析和建议，但不做决定

**用户需要平衡各方需求！**

---

### 6. 对话式教学

**边玩边学，AI实时教学**：

```
[教学时刻]
用户提出策略: "我想花$10000做Facebook广告"

AI增长顾问切入:
"等等！在投广告之前，你需要回答3个问题：

1️⃣ 你的目标CAC是多少？
   当前LTV: $50
   建议CAC < $15 (LTV的30%)

2️⃣ 你测试过落地页转化率吗？
   如果转化率只有1%，再多广告费也是浪费

3️⃣ 你的留存率怎么样？
   Day 7留存: 20% ⚠️ 偏低
   建议：先优化产品再买量

💡 增长黑客原则：
'不要在漏桶里加水' - 先修好留存，再做获客

要继续投广告吗？还是先优化产品？
> [输入你的决定并说明理由]"
```

---

## 🏗️ 技术实现

### 架构设计

```javascript
// 1. AI对话管理器
class AIDialogueManager {
    constructor(apiKey) {
        this.apiKey = apiKey;
        this.conversationHistory = [];
        this.currentRole = 'advisor'; // advisor, ceo, investor, user, etc.
    }

    async sendMessage(userInput, context) {
        // 调用 Claude API
        const systemPrompt = this.buildSystemPrompt(context);
        const response = await this.callClaudeAPI(userInput, systemPrompt);

        // 解析AI响应
        const parsed = this.parseResponse(response);

        return {
            text: parsed.text,
            suggestions: parsed.suggestions,
            nextRole: parsed.nextRole,
            sceneChange: parsed.sceneChange
        };
    }

    buildSystemPrompt(context) {
        return `你是一个增长黑客游戏中的${this.currentRole}角色。

当前游戏状态：
- 用户数: ${context.users}
- 收入: ${context.revenue}
- 预算: ${context.budget}
- 团队士气: ${context.teamEnergy}
- 当前关卡: ${context.level}

你的任务：
1. 根据用户的策略输入，给出有深度的反馈
2. 提出追问来引导用户思考
3. 扮演你的角色（如果是CEO就要激进，如果是投资人就要谨慎）
4. 教育用户增长黑客的原则
5. 根据对话决定是否触发新场景

响应格式（JSON）：
{
  "text": "对话内容",
  "suggestions": ["建议1", "建议2"],
  "nextRole": "下一个发言的角色",
  "sceneChange": null | { type: "event", description: "..." }
}`;
    }

    async callClaudeAPI(userInput, systemPrompt) {
        const response = await fetch('https://api.anthropic.com/v1/messages', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'x-api-key': this.apiKey,
                'anthropic-version': '2023-06-01'
            },
            body: JSON.stringify({
                model: 'claude-3-5-sonnet-20241022',
                max_tokens: 1024,
                messages: [
                    ...this.conversationHistory,
                    { role: 'user', content: userInput }
                ],
                system: systemPrompt
            })
        });

        return await response.json();
    }
}

// 2. 场景生成器（AI驱动）
class SceneGenerator {
    async generateScene(gameState, userHistory) {
        // 根据游戏状态和历史生成新场景
        const prompt = `基于以下游戏状态生成下一个场景：

当前状态：${JSON.stringify(gameState)}
历史决策：${JSON.stringify(userHistory)}

生成一个新的增长挑战场景，包括：
1. 场景描述（像写小说一样）
2. NPC对话（CEO/投资人/用户的反应）
3. 核心挑战
4. 潜在的策略方向（3-4个建议）

要求：
- 有戏剧性和紧迫感
- 基于真实的增长挑战
- 给用户足够的思考空间`;

        const scene = await this.callAI(prompt);
        return scene;
    }
}

// 3. 增强的游戏引擎
class EnhancedGameEngine {
    constructor() {
        this.dialogueManager = new AIDialogueManager(API_KEY);
        this.sceneGenerator = new SceneGenerator();
        this.npcManager = new NPCManager();

        this.gameState = {
            users: 1000,
            revenue: 5000,
            budget: 10000,
            teamEnergy: 100,
            relationships: {
                ceo: 50,
                investor: 50,
                team: 50
            },
            currentScene: null,
            conversationHistory: []
        };
    }

    async handleUserInput(input) {
        // 1. 发送给AI分析
        const aiResponse = await this.dialogueManager.sendMessage(
            input,
            this.gameState
        );

        // 2. 更新游戏状态
        this.updateGameState(aiResponse);

        // 3. 检查是否触发新场景
        if (aiResponse.sceneChange) {
            const newScene = await this.sceneGenerator.generateScene(
                this.gameState,
                this.conversationHistory
            );
            this.currentScene = newScene;
        }

        // 4. NPC反应
        const npcReactions = this.npcManager.getReactions(
            input,
            aiResponse,
            this.gameState
        );

        return {
            aiResponse,
            npcReactions,
            sceneUpdate: this.currentScene
        };
    }
}
```

---

## 🎨 UI/UX 设计

### 布局（参考截图）

```
┌─────────────────────────────────────────────────────────────┐
│ 增长黑客模拟器                    Day 45  Budget: $8,500    │
├──────────────────────────┬──────────────────────────────────┤
│                          │  [CC] 当前场景                    │
│  [剧情对话区]            │  📊 初创公司 - A轮前夕            │
│                          │  用户: 8,234 (↑12%)              │
│  🧑‍💼 CEO:                │  收入: $15,420/月                │
│  "董事会下周开会，他们   │  预算: $8,500 剩余                │
│   想看到50%的月增长。    │                                   │
│   你有信心吗？"          │  [$] 关系面板                     │
│                          │  CEO满意度: ████████░░ 80%       │
│  💰 投资人:              │  投资人信任: ██████░░░░ 60%       │
│  "我听说你打算烧钱买量？ │  团队士气: ███████░░░ 70%         │
│   给我一个convincing的   │  用户NPS: ████░░░░░░ 45           │
│   ROI模型。"             │                                   │
│                          │  [分析日志]                       │
│  🤖 增长顾问:            │  > 上周策略: 内容营销             │
│  "注意：当前CAC $45，    │    效果: CAC降低20%               │
│   LTV $120。             │  > 风险提示: 留存率下降            │
│   健康但可优化。"        │  > AI建议: 优先激活流程            │
│                          │                                   │
│  [你的回答]              │  [$] 技能解锁                     │
│  ┌────────────────────┐  │  ✅ 内容营销 Lv.2                 │
│  │ 输入你的策略...    │  │  ✅ A/B测试 Lv.1                  │
│  │ [支持多行输入]     │  │  🔒 病毒循环 (需要500XP)          │
│  │                    │  │  🔒 增长飞轮 (需要1000XP)         │
│  └────────────────────┘  │                                   │
│  [发送] [需要建议]      │                                   │
└──────────────────────────┴──────────────────────────────────┘
```

---

## 🚀 实现计划

### Phase 1: API集成 (2-3小时)
- [ ] 添加 Claude API 调用模块
- [ ] 创建对话管理器
- [ ] 测试 API 响应

### Phase 2: 对话系统 (3-4小时)
- [ ] 实现自由输入框
- [ ] 多轮对话逻辑
- [ ] NPC 角色系统
- [ ] 对话历史管理

### Phase 3: 动态场景 (2-3小时)
- [ ] 场景生成器
- [ ] 随机事件系统
- [ ] 剧情分支

### Phase 4: UI改造 (3-4小时)
- [ ] 双栏布局（对话+状态面板）
- [ ] 实时打字效果
- [ ] NPC头像和表情
- [ ] 对话历史滚动

### Phase 5: 教学系统 (2小时)
- [ ] 实时知识点提示
- [ ] 增长黑客原则卡片
- [ ] 案例库

---

## 💡 关键特性

### 1. 智能评估系统
用户输入任何策略后，AI会从多个维度评估：
- ✅ 可行性（技术、资源、时间）
- 💰 成本效益（ROI、CAC、LTV）
- ⚡ 执行难度
- 🎯 预期效果
- ⚠️ 潜在风险
- 💡 优化建议

### 2. 反苏格拉底式教学
不直接告诉答案，而是通过提问引导：
```
用户: "我想做广告"
AI: "为什么选择广告而不是内容营销？"
用户: "因为广告见效快"
AI: "见效快，但成本高。你计算过如果CAC是$50，需要多少预算获得1000个新用户吗？"
用户: "需要$50,000"
AI: "对的。那如果你的预算只有$10,000，有没有其他方式获得1000个用户？"
```

### 3. 动态剧情分支
```
决策A: 激进增长（烧钱买量）
→ 用户快速增长但预算耗尽
→ 触发事件：投资人要求紧急会议
→ 新挑战：如何在没钱的情况下保持增长

决策B: 稳健增长（产品优化）
→ 增长缓慢但健康
→ 触发事件：竞争对手融资
→ 新挑战：如何在竞争中突围
```

### 4. 真实感模拟
- 时间流逝（每个决策消耗天数）
- 市场变化（竞争对手动作、行业趋势）
- 团队动态（士气影响执行效率）
- 用户反馈（真实的产品评价）

---

## 📊 成功指标

新版本应该达到：
- ⏱️ 每局游戏时长：30-60分钟（vs 当前10-15分钟）
- 💬 对话轮次：20-50轮（vs 当前6-12次选择）
- 📝 用户输入：平均每局10+次自由输入
- 🎓 学习深度：掌握15+增长黑客概念
- 🎭 沉浸感：像在真实公司工作

---

## 🎮 游戏流程示例

### 完整一局游戏

**开场（AI生成）**
```
[第1天]
你刚加入一家SaaS创业公司担任增长负责人。

CEO: "欢迎加入！我们的产品是项目管理工具，目前有1000个注册用户，
      但月活只有300，付费用户仅20个。董事会给了6个月时间证明
      我们的增长潜力，否则就要关门了。"

你的第一个任务是什么？
> [自由输入]
```

**中期（多轮对话）**
```
[第30天]
你通过内容营销获得了2000新用户，但激活率只有15%。

CTO: "我发现很多用户注册后就不再登录了，是产品问题吗？"
投资人: "这个激活率太低了，你打算怎么改进？"

> 用户输入策略 > AI追问细节 > 用户细化方案 > AI评估 > 执行

[随机事件]
💥 竞争对手Asana宣布免费计划！你的一些用户在Twitter上讨论要转投。

你如何应对？
> [自由输入或选择建议]
```

**结局（AI生成）**
```
[第180天 - 董事会会议]

基于你的决策，AI生成个性化结局：

情况A（成功）：
"恭喜！你通过产品主导增长策略，在6个月内将月活用户提升到15000，
 付费用户300，MRR $15000。董事会批准了A轮融资$2M。"

情况B（失败）：
"很遗憾，虽然你努力了，但激活率始终低于20%，付费转化不到2%。
 投资人决定停止注资。不过你学到了很多增长黑客的经验！"

情况C（惊喜）：
"意外！虽然用户数没有达标，但你发现了一个高价值的niche市场，
 付费用户虽然只有50个，但ARPU达到$500/月，投资人看到了潜力..."
```

---

## 🎯 与当前版本的对比

| 维度 | 当前版本 | 增强版本 |
|------|----------|----------|
| 用户输入 | 6-12次点击选择 | 20-50次对话输入 |
| 自由度 | 低（预设选项） | 高（自由输入） |
| AI参与 | 无 | 深度集成 |
| 对话深度 | 1轮（选择→结果） | 3-5轮（提出→追问→细化→评估→执行） |
| 教学方式 | 反馈文本 | 苏格拉底式提问 |
| 剧情 | 固定6关 | 动态生成 |
| NPC角色 | 无 | 5个角色互动 |
| 游戏时长 | 10-15分钟 | 30-60分钟 |
| 重玩价值 | 低 | 高（每次不同） |

---

## 💰 成本估算

使用 Claude API：
- 每局游戏约 30-50 次 API 调用
- 每次约 500 tokens input + 300 tokens output
- 成本：约 $0.10-0.20 / 局

如果每天1000个玩家：
- 月成本：约 $3000-6000

**优化方案**：
- 缓存常见场景
- 混合使用：关键对话用 API，简单反馈用本地逻辑
- 提供"免费体验"（前3局）+ "付费模式"（解锁无限对话）

---

## 🚀 下一步

要实现这个方案吗？我可以：

1. **创建原型** - 先实现核心对话系统
2. **API集成** - 添加 Claude API 调用
3. **UI改造** - 改成双栏对话布局
4. **测试版本** - 先做1-2个场景的深度互动版本

或者我们先做一个**单场景的完整原型**来测试效果？

你觉得这个方向如何？有什么想法或调整吗？
