<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¢é•¿é»‘å®¢æ¨¡æ‹Ÿå™¨ - AIå¯¹è¯ç‰ˆ</title>
    <link rel="stylesheet" href="elegant-game.css">
</head>
<body>
    <div id="game-container">
        <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
        <header class="game-header">
            <div class="header-content">
                <h1 class="game-title">å¢é•¿é»‘å®¢æ¨¡æ‹Ÿå™¨ - AIå¯¹è¯ç‰ˆ</h1>
                <div class="game-stats">
                    <div class="stat-item">
                        <span>ğŸ“… Day</span>
                        <span class="stat-value" id="current-day">1</span>
                    </div>
                    <div class="stat-item">
                        <span>ğŸ’° é¢„ç®—</span>
                        <span class="stat-value" id="current-budget">$10,000</span>
                    </div>
                    <div class="stat-item">
                        <span>ğŸ¯ ç›®æ ‡ç”¨æˆ·</span>
                        <span class="stat-value" id="target-users">10,000</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="game-main">
            <!-- å·¦ä¾§å¯¹è¯åŒº -->
            <section class="conversation-panel">
                <!-- å¯¹è¯å†å² -->
                <div class="conversation-history" id="conversation-history">
                    <!-- åˆå§‹æ¶ˆæ¯ -->
                    <div class="message npc-message">
                        <div class="message-avatar">ğŸ§‘â€ğŸ’¼</div>
                        <div class="message-content">
                            <div class="message-bubble">
                                <div class="message-speaker">CEO</div>
                                <div class="message-text">æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„åˆ›ä¸šå›¢é˜Ÿï¼æˆ‘æ˜¯CEOå¼ æ˜ã€‚æˆ‘ä»¬åˆšåˆšæ‹¿åˆ°äº†å¤©ä½¿è½®èèµ„ï¼Œç°åœ¨æ€¥éœ€å¿«é€Ÿå¢é•¿ç”¨æˆ·ã€‚

ä½ ä½œä¸ºå¢é•¿è´Ÿè´£äººï¼Œæœ‰ä»€ä¹ˆå¥½çš„ç­–ç•¥å—ï¼Ÿæˆ‘ä»¬çš„é¢„ç®—æœ‰é™ï¼Œéœ€è¦åœ¨3ä¸ªæœˆå†…è¾¾åˆ°10,000ä¸ªæ´»è·ƒç”¨æˆ·ã€‚</div>
                            </div>
                        </div>
                    </div>

                    <div class="message npc-message">
                        <div class="message-avatar">ğŸ¤–</div>
                        <div class="message-content">
                            <div class="message-bubble">
                                <div class="message-speaker">AIé¡¾é—®</div>
                                <div class="message-text">è®©æˆ‘å¸®ä½ åˆ†æä¸€ä¸‹å½“å‰æƒ…å†µï¼š

ğŸ“Š å½“å‰çŠ¶æ€ï¼š
â€¢ é¢„ç®—ï¼š$10,000
â€¢ å›¢é˜Ÿç²¾åŠ›ï¼š100%
â€¢ å¸‚åœºæ—¶æœºï¼šè‰¯å¥½ï¼ˆ80%ï¼‰
â€¢ ç”¨æˆ·ä¿¡ä»»ï¼šä¸­ç­‰ï¼ˆ50%ï¼‰

ğŸ’¡ å»ºè®®æ–¹å‘ï¼š
1. å†…å®¹è¥é”€ - æˆæœ¬ä½ï¼Œæ•ˆæœæŒä¹…
2. ç¤¾äº¤åª’ä½“æ¨å¹¿ - å¿«é€Ÿè·å–æµé‡
3. äº§å“ä¼˜åŒ– - æå‡ç•™å­˜ç‡

ä½ æƒ³ä»å“ªä¸ªæ–¹å‘å¼€å§‹ï¼Ÿ</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å¯¹è¯è¾“å…¥åŒº -->
                <div class="conversation-input">
                    <div class="input-wrapper">
                        <!-- å¿«æ·å»ºè®® -->
                        <div class="quick-suggestions" id="quick-suggestions">
                            <button class="suggestion-btn" onclick="insertSuggestion('æˆ‘æƒ³å…ˆåšå†…å®¹è¥é”€ï¼Œå»ºç«‹å“ç‰Œå½±å“åŠ›')">
                                ğŸ“ å†…å®¹è¥é”€ç­–ç•¥
                            </button>
                            <button class="suggestion-btn" onclick="insertSuggestion('æŠ•æ”¾ç¤¾äº¤åª’ä½“å¹¿å‘Šï¼Œå¿«é€Ÿè·å–ç”¨æˆ·')">
                                ğŸ“± ç¤¾äº¤åª’ä½“æ¨å¹¿
                            </button>
                            <button class="suggestion-btn" onclick="insertSuggestion('ä¼˜åŒ–äº§å“ä½“éªŒï¼Œæå‡ç”¨æˆ·ç•™å­˜')">
                                ğŸ¯ äº§å“ä¼˜åŒ–
                            </button>
                            <button class="suggestion-btn" onclick="insertSuggestion('éœ€è¦æ›´å¤šå»ºè®®')">
                                ğŸ’¡ éœ€è¦å»ºè®®
                            </button>
                        </div>

                        <!-- è¾“å…¥æ¡†å’ŒæŒ‰é’® -->
                        <div class="input-container">
                            <textarea
                                id="user-input"
                                placeholder="ğŸ’­ è¾“å…¥ä½ çš„å¢é•¿ç­–ç•¥..."
                                rows="3"
                                onkeydown="handleKeyDown(event)"
                            ></textarea>
                            <div class="input-actions">
                                <button class="btn btn-secondary" onclick="requestHelp()">
                                    ğŸ’¡ éœ€è¦å»ºè®®
                                </button>
                                <button class="btn btn-primary" onclick="sendMessage()" id="send-btn">
                                    å‘é€ ğŸ“¤
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- å³ä¾§çŠ¶æ€é¢æ¿ -->
            <aside class="status-panel">
                <!-- å½“å‰åœºæ™¯ -->
                <div class="panel-section">
                    <h3 class="section-title">ğŸ“ å½“å‰åœºæ™¯</h3>
                    <div class="scene-info">
                        <div class="scene-location">ğŸ¢ åˆ›ä¸šå…¬å¸åŠå…¬å®¤ - ç¬¬1å¤©</div>
                        <p>ä½ åˆšåˆšåŠ å…¥ä¸€å®¶æ—©æœŸåˆ›ä¸šå…¬å¸ï¼Œæ‹…ä»»å¢é•¿è´Ÿè´£äººã€‚CEOå¯¹ä½ å¯„äºˆåšæœ›ï¼Œå¸Œæœ›èƒ½åœ¨æœ‰é™çš„é¢„ç®—ä¸‹å®ç°å¿«é€Ÿå¢é•¿ã€‚</p>
                    </div>
                </div>

                <!-- èµ„æºçŠ¶æ€ -->
                <div class="panel-section">
                    <h3 class="section-title">ğŸ“Š èµ„æºçŠ¶æ€</h3>

                    <div class="resource-item">
                        <div class="resource-label">
                            <span class="resource-name">ğŸ’° é¢„ç®—</span>
                            <span class="resource-value" id="budget-value">$10,000</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-budget" id="budget-bar" style="width: 100%"></div>
                        </div>
                    </div>

                    <div class="resource-item">
                        <div class="resource-label">
                            <span class="resource-name">âš¡ å›¢é˜Ÿç²¾åŠ›</span>
                            <span class="resource-value" id="energy-value">100%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-energy" id="energy-bar" style="width: 100%"></div>
                        </div>
                    </div>

                    <div class="resource-item">
                        <div class="resource-label">
                            <span class="resource-name">â° å¸‚åœºæ—¶æœº</span>
                            <span class="resource-value" id="timing-value">80%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-timing" id="timing-bar" style="width: 80%"></div>
                        </div>
                    </div>

                    <div class="resource-item">
                        <div class="resource-label">
                            <span class="resource-name">â¤ï¸ ç”¨æˆ·ä¿¡ä»»</span>
                            <span class="resource-value" id="trust-value">50%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-trust" id="trust-bar" style="width: 50%"></div>
                        </div>
                    </div>

                    <div class="resource-item">
                        <div class="resource-label">
                            <span class="resource-name">â­ å“ç‰Œå£°èª‰</span>
                            <span class="resource-value" id="reputation-value">50%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-reputation" id="reputation-bar" style="width: 50%"></div>
                        </div>
                    </div>

                    <div class="resource-item">
                        <div class="resource-label">
                            <span class="resource-name">ğŸ“ˆ ç”¨æˆ·å¢é•¿</span>
                            <span class="resource-value" id="growth-value">0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-growth" id="growth-bar" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="resource-item">
                        <div class="resource-label">
                            <span class="resource-name">ğŸ”„ ç”¨æˆ·ç•™å­˜</span>
                            <span class="resource-value" id="retention-value">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-retention" id="retention-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <!-- å…³ç³»é¢æ¿ -->
                <div class="panel-section">
                    <h3 class="section-title">ğŸ‘¥ å…³ç³»é¢æ¿</h3>

                    <div class="relationship-item">
                        <span class="relationship-name">ğŸ§‘â€ğŸ’¼ CEOæ»¡æ„åº¦</span>
                        <div class="relationship-bar">
                            <div class="relationship-fill" id="ceo-relation" style="width: 80%"></div>
                        </div>
                        <span class="relationship-value">80%</span>
                    </div>

                    <div class="relationship-item">
                        <span class="relationship-name">ğŸ’° æŠ•èµ„äººä¿¡å¿ƒ</span>
                        <div class="relationship-bar">
                            <div class="relationship-fill" id="investor-relation" style="width: 60%"></div>
                        </div>
                        <span class="relationship-value">60%</span>
                    </div>

                    <div class="relationship-item">
                        <span class="relationship-name">ğŸ‘¨â€ğŸ’» å›¢é˜Ÿå£«æ°”</span>
                        <div class="relationship-bar">
                            <div class="relationship-fill" id="team-relation" style="width: 70%"></div>
                        </div>
                        <span class="relationship-value">70%</span>
                    </div>

                    <div class="relationship-item">
                        <span class="relationship-name">ğŸ˜Š ç”¨æˆ·æ»¡æ„åº¦</span>
                        <div class="relationship-bar">
                            <div class="relationship-fill" id="user-relation" style="width: 50%"></div>
                        </div>
                        <span class="relationship-value">50%</span>
                    </div>
                </div>

                <!-- æŠ€èƒ½è§£é” -->
                <div class="panel-section">
                    <h3 class="section-title">ğŸ“ æŠ€èƒ½è§£é”</h3>

                    <div class="skill-item">
                        <span class="skill-icon">âœ…</span>
                        <div class="skill-info">
                            <div class="skill-name">å†…å®¹è¥é”€ Lv.1</div>
                            <div class="skill-requirement">å·²è§£é”</div>
                        </div>
                    </div>

                    <div class="skill-item skill-locked">
                        <span class="skill-icon">ğŸ”’</span>
                        <div class="skill-info">
                            <div class="skill-name">A/Bæµ‹è¯•</div>
                            <div class="skill-requirement">éœ€è¦ 100 XP</div>
                        </div>
                    </div>

                    <div class="skill-item skill-locked">
                        <span class="skill-icon">ğŸ”’</span>
                        <div class="skill-info">
                            <div class="skill-name">ç—…æ¯’å¾ªç¯</div>
                            <div class="skill-requirement">éœ€è¦ 500 XP</div>
                        </div>
                    </div>

                    <div class="skill-item skill-locked">
                        <span class="skill-icon">ğŸ”’</span>
                        <div class="skill-info">
                            <div class="skill-name">æ•°æ®åˆ†æ</div>
                            <div class="skill-requirement">éœ€è¦ 300 XP</div>
                        </div>
                    </div>

                    <div class="skill-item skill-locked">
                        <span class="skill-icon">ğŸ”’</span>
                        <div class="skill-info">
                            <div class="skill-name">å¢é•¿é»‘å®¢</div>
                            <div class="skill-requirement">éœ€è¦ 1000 XP</div>
                        </div>
                    </div>
                </div>

                <!-- æ¸¸æˆæ—¥å¿— -->
                <div class="panel-section">
                    <h3 class="section-title">ğŸ“œ æ¸¸æˆæ—¥å¿—</h3>
                    <div id="game-log">
                        <div class="log-item">
                            <div class="log-time">Day 1 - 09:00</div>
                            <div>ğŸ® æ¸¸æˆå¼€å§‹</div>
                        </div>
                        <div class="log-item">
                            <div class="log-time">Day 1 - 09:05</div>
                            <div>ğŸ§‘â€ğŸ’¼ CEOå‘èµ·å¯¹è¯</div>
                        </div>
                        <div class="log-item">
                            <div class="log-time">Day 1 - 09:10</div>
                            <div>ğŸ¤– AIé¡¾é—®æä¾›å»ºè®®</div>
                        </div>
                    </div>
                </div>
            </aside>
        </main>
    </div>

    <!-- JavaScript -->
    <script>
        // ============================================
        // æ¸¸æˆçŠ¶æ€ç®¡ç†
        // ============================================

        const gameState = {
            day: 1,
            budget: 10000,
            maxBudget: 10000,
            energy: 100,
            timing: 80,
            trust: 50,
            reputation: 50,
            growth: 0,
            retention: 0,
            targetUsers: 10000,
            currentUsers: 0,

            // å…³ç³»å€¼
            relations: {
                ceo: 80,
                investor: 60,
                team: 70,
                user: 50
            },

            // ç»éªŒå€¼
            xp: 0,

            // å·²è§£é”æŠ€èƒ½
            unlockedSkills: ['content-marketing-1']
        };

        // NPCè§’è‰²å®šä¹‰
        const NPCs = {
            ceo: { name: 'CEO', emoji: 'ğŸ§‘â€ğŸ’¼', title: 'CEO' },
            advisor: { name: 'AIé¡¾é—®', emoji: 'ğŸ¤–', title: 'AIé¡¾é—®' },
            cto: { name: 'CTO', emoji: 'ğŸ‘¨â€ğŸ’»', title: 'CTO' },
            investor: { name: 'æŠ•èµ„äºº', emoji: 'ğŸ’°', title: 'æŠ•èµ„äºº' },
            user: { name: 'ç”¨æˆ·', emoji: 'ğŸ˜Š', title: 'ç”¨æˆ·' }
        };

        // ============================================
        // UIæ›´æ–°å‡½æ•°
        // ============================================

        function updateUI() {
            // æ›´æ–°é¡¶éƒ¨ç»Ÿè®¡
            document.getElementById('current-day').textContent = gameState.day;
            document.getElementById('current-budget').textContent = `$${gameState.budget.toLocaleString()}`;
            document.getElementById('target-users').textContent = gameState.targetUsers.toLocaleString();

            // æ›´æ–°èµ„æºæ¡
            updateResource('budget', gameState.budget, gameState.maxBudget, `$${gameState.budget.toLocaleString()}`);
            updateResource('energy', gameState.energy, 100, `${gameState.energy}%`);
            updateResource('timing', gameState.timing, 100, `${gameState.timing}%`);
            updateResource('trust', gameState.trust, 100, `${gameState.trust}%`);
            updateResource('reputation', gameState.reputation, 100, `${gameState.reputation}%`);
            updateResource('growth', gameState.currentUsers, gameState.targetUsers, gameState.currentUsers);
            updateResource('retention', gameState.retention, 100, `${gameState.retention}%`);

            // æ›´æ–°å…³ç³»
            updateRelation('ceo', gameState.relations.ceo);
            updateRelation('investor', gameState.relations.investor);
            updateRelation('team', gameState.relations.team);
            updateRelation('user', gameState.relations.user);
        }

        function updateResource(name, value, max, displayText) {
            const percentage = Math.min(100, Math.max(0, (value / max) * 100));
            document.getElementById(`${name}-bar`).style.width = `${percentage}%`;
            document.getElementById(`${name}-value`).textContent = displayText;
        }

        function updateRelation(name, value) {
            const percentage = Math.min(100, Math.max(0, value));
            document.getElementById(`${name}-relation`).style.width = `${percentage}%`;
            document.getElementById(`${name}-relation`).parentElement.nextElementSibling.textContent = `${percentage}%`;
        }

        // ============================================
        // å¯¹è¯ç³»ç»Ÿ
        // ============================================

        function addMessage(speaker, text, isUser = false) {
            const historyDiv = document.getElementById('conversation-history');

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'npc-message'}`;

            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = isUser ? 'ğŸ‘¤' : (NPCs[speaker]?.emoji || 'ğŸ¤–');

            const content = document.createElement('div');
            content.className = 'message-content';

            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';

            const speakerName = document.createElement('div');
            speakerName.className = 'message-speaker';
            speakerName.textContent = isUser ? 'ä½ ' : (NPCs[speaker]?.title || speaker);

            const messageText = document.createElement('div');
            messageText.className = 'message-text';

            bubble.appendChild(speakerName);
            bubble.appendChild(messageText);
            content.appendChild(bubble);

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(content);

            historyDiv.appendChild(messageDiv);

            // æ‰“å­—æœºæ•ˆæœ
            if (!isUser) {
                typeWriter(messageText, text, 30);
            } else {
                messageText.textContent = text;
            }

            // æ»šåŠ¨åˆ°åº•éƒ¨
            historyDiv.scrollTop = historyDiv.scrollHeight;

            return messageDiv;
        }

        function typeWriter(element, text, speed = 50) {
            let i = 0;
            element.textContent = '';

            function type() {
                if (i < text.length) {
                    element.textContent += text.charAt(i);
                    i++;
                    setTimeout(type, speed);

                    // è‡ªåŠ¨æ»šåŠ¨
                    const historyDiv = document.getElementById('conversation-history');
                    historyDiv.scrollTop = historyDiv.scrollHeight;
                }
            }

            type();
        }

        // ============================================
        // æ¶ˆæ¯å‘é€
        // ============================================

        function sendMessage() {
            const input = document.getElementById('user-input');
            const text = input.value.trim();

            if (!text) {
                return;
            }

            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            addMessage('user', text, true);

            // æ¸…ç©ºè¾“å…¥æ¡†
            input.value = '';

            // æ·»åŠ æ—¥å¿—
            addGameLog(`ä½ : ${text.substring(0, 30)}${text.length > 30 ? '...' : ''}`);

            // æ¨¡æ‹ŸAIå›å¤
            setTimeout(() => {
                processUserMessage(text);
            }, 1000);
        }

        function processUserMessage(text) {
            const lowerText = text.toLowerCase();

            // ç®€å•çš„å…³é”®è¯è¯†åˆ«
            if (lowerText.includes('å†…å®¹') || lowerText.includes('è¥é”€')) {
                respondContentMarketing();
            } else if (lowerText.includes('ç¤¾äº¤') || lowerText.includes('å¹¿å‘Š')) {
                respondSocialMedia();
            } else if (lowerText.includes('äº§å“') || lowerText.includes('ä¼˜åŒ–')) {
                respondProductOptimization();
            } else if (lowerText.includes('å»ºè®®') || lowerText.includes('å¸®åŠ©')) {
                requestHelp();
            } else {
                respondGeneric();
            }
        }

        function respondContentMarketing() {
            addMessage('advisor', `å¾ˆå¥½çš„é€‰æ‹©ï¼å†…å®¹è¥é”€æ˜¯æˆæœ¬æ•ˆç›Šæœ€é«˜çš„å¢é•¿ç­–ç•¥ä¹‹ä¸€ã€‚

ğŸ“ å†…å®¹è¥é”€æ–¹æ¡ˆï¼š
â€¢ æˆæœ¬ï¼š$2,000
â€¢ é¢„è®¡ç”¨æˆ·å¢é•¿ï¼š500-800äºº
â€¢ æ—¶é—´å‘¨æœŸï¼š2å‘¨
â€¢ å“ç‰Œå£°èª‰ï¼š+15%

è¿™ä¸ªç­–ç•¥éœ€è¦å›¢é˜ŸæŠ•å…¥è¾ƒå¤šç²¾åŠ›ï¼Œä½†èƒ½å»ºç«‹é•¿æœŸçš„å“ç‰Œå½±å“åŠ›ã€‚ç¡®å®šè¦æ‰§è¡Œå—ï¼Ÿ`);

            gameState.budget -= 2000;
            gameState.energy -= 20;
            gameState.reputation += 15;
            gameState.currentUsers += 650;
            gameState.relations.ceo += 5;
            gameState.xp += 50;

            updateUI();
            addGameLog('ğŸ“ å¯åŠ¨å†…å®¹è¥é”€ç­–ç•¥');

            setTimeout(() => {
                addMessage('ceo', 'ä¸é”™çš„å¼€å§‹ï¼æˆ‘çœ‹åˆ°æ•°æ®åœ¨å¢é•¿ã€‚ç»§ç»­ä¿æŒï¼');
            }, 3000);
        }

        function respondSocialMedia() {
            addMessage('advisor', `ç¤¾äº¤åª’ä½“æ¨å¹¿èƒ½å¿«é€Ÿå¸¦æ¥æµé‡ï¼

ğŸ“± ç¤¾äº¤åª’ä½“æ–¹æ¡ˆï¼š
â€¢ æˆæœ¬ï¼š$3,000
â€¢ é¢„è®¡ç”¨æˆ·å¢é•¿ï¼š1000-1500äºº
â€¢ æ—¶é—´å‘¨æœŸï¼š1å‘¨
â€¢ ç”¨æˆ·ä¿¡ä»»ï¼šå¯èƒ½é™ä½5%ï¼ˆä»˜è´¹å¹¿å‘Šï¼‰

è¿™ä¸ªç­–ç•¥è§æ•ˆå¿«ï¼Œä½†éœ€è¦æŒç»­æŠ•å…¥ã€‚ä½ ç¡®å®šè¦æŠ•æ”¾å¹¿å‘Šå—ï¼Ÿ`);

            gameState.budget -= 3000;
            gameState.energy -= 15;
            gameState.trust -= 5;
            gameState.currentUsers += 1200;
            gameState.relations.investor += 10;
            gameState.xp += 40;

            updateUI();
            addGameLog('ğŸ“± å¯åŠ¨ç¤¾äº¤åª’ä½“æ¨å¹¿');

            setTimeout(() => {
                addMessage('investor', 'ğŸ’° å¾ˆé«˜å…´çœ‹åˆ°ç§¯æçš„è¡ŒåŠ¨ï¼ç”¨æˆ·æ•°æ®ä¸é”™ã€‚');
            }, 3000);
        }

        function respondProductOptimization() {
            addMessage('cto', `ğŸ‘¨â€ğŸ’» å¤ªå¥½äº†ï¼ä½œä¸ºCTOï¼Œæˆ‘ä¸€ç›´è®¤ä¸ºäº§å“ä½“éªŒæœ€é‡è¦ã€‚

ğŸ¯ äº§å“ä¼˜åŒ–æ–¹æ¡ˆï¼š
â€¢ æˆæœ¬ï¼š$1,500
â€¢ ç”¨æˆ·å¢é•¿ï¼šè¾ƒæ…¢ï¼ˆ200-300äººï¼‰
â€¢ ç”¨æˆ·ç•™å­˜ï¼š+20%
â€¢ ç”¨æˆ·æ»¡æ„åº¦ï¼š+15%

è™½ç„¶çŸ­æœŸå¢é•¿æ…¢ï¼Œä½†èƒ½æ˜¾è‘—æå‡ç•™å­˜ç‡ã€‚è¿™æ˜¯é•¿æœŸæˆ˜ç•¥ã€‚`);

            gameState.budget -= 1500;
            gameState.energy -= 25;
            gameState.retention += 20;
            gameState.currentUsers += 250;
            gameState.relations.team += 15;
            gameState.relations.user += 15;
            gameState.xp += 60;

            updateUI();
            addGameLog('ğŸ¯ å¯åŠ¨äº§å“ä¼˜åŒ–é¡¹ç›®');

            setTimeout(() => {
                addMessage('user', 'ğŸ˜Š äº§å“ä½“éªŒå¥½å¤šäº†ï¼æˆ‘ä¼šæ¨èç»™æœ‹å‹ã€‚');
            }, 3000);
        }

        function respondGeneric() {
            const responses = [
                {
                    speaker: 'advisor',
                    text: 'ğŸ¤– æˆ‘ç†è§£ä½ çš„æƒ³æ³•ã€‚è®©æˆ‘åˆ†æä¸€ä¸‹å½“å‰æƒ…å†µ...\n\nåŸºäºç°æœ‰èµ„æºï¼Œæˆ‘å»ºè®®ä½ ä¼˜å…ˆè€ƒè™‘æˆæœ¬æ•ˆç›Šé«˜çš„ç­–ç•¥ã€‚ä½ å¯ä»¥é—®æˆ‘å…³äºå…·ä½“ç­–ç•¥çš„é—®é¢˜ã€‚'
                },
                {
                    speaker: 'ceo',
                    text: 'ğŸ§‘â€ğŸ’¼ ä½ çš„æƒ³æ³•å¾ˆæœ‰è¶£ã€‚ä¸è¿‡æˆ‘ä»¬éœ€è¦çœ‹åˆ°å…·ä½“çš„æ‰§è¡Œæ–¹æ¡ˆã€‚èƒ½è¯¦ç»†è¯´è¯´å—ï¼Ÿ'
                },
                {
                    speaker: 'advisor',
                    text: 'ğŸ’¡ å¥½çš„æƒ³æ³•éœ€è¦å¥½çš„æ‰§è¡Œã€‚æˆ‘å»ºè®®ä½ å…ˆè€ƒè™‘ï¼š\n1. ç›®æ ‡ç”¨æˆ·æ˜¯è°ï¼Ÿ\n2. é¢„ç®—åˆ†é…å¦‚ä½•ï¼Ÿ\n3. é¢„æœŸæ•ˆæœæ˜¯ä»€ä¹ˆï¼Ÿ'
                }
            ];

            const response = responses[Math.floor(Math.random() * responses.length)];
            addMessage(response.speaker, response.text);
        }

        function requestHelp() {
            addMessage('advisor', `ğŸ¤– è®©æˆ‘ä¸ºä½ æä¾›ä¸€äº›å»ºè®®ï¼š

å½“å‰çŠ¶æ€åˆ†æï¼š
â€¢ é¢„ç®—å‰©ä½™ï¼š$${gameState.budget.toLocaleString()}
â€¢ å›¢é˜Ÿç²¾åŠ›ï¼š${gameState.energy}%
â€¢ å½“å‰ç”¨æˆ·ï¼š${gameState.currentUsers}/${gameState.targetUsers}

ğŸ’¡ æ¨èç­–ç•¥ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰ï¼š

1ï¸âƒ£ å†…å®¹è¥é”€ï¼ˆæ¨èï¼‰
   æˆæœ¬ä½ï¼Œæ•ˆæœæŒä¹…ï¼Œæå‡å“ç‰Œ

2ï¸âƒ£ äº§å“ä¼˜åŒ–
   æå‡ç•™å­˜ï¼Œé•¿æœŸä»·å€¼é«˜

3ï¸âƒ£ ç¤¾äº¤åª’ä½“
   å¿«é€Ÿè·å®¢ï¼Œä½†æˆæœ¬è¾ƒé«˜

ä½ æƒ³äº†è§£å“ªä¸ªç­–ç•¥çš„è¯¦ç»†ä¿¡æ¯ï¼Ÿ`);

            addGameLog('ğŸ’¡ è¯·æ±‚AIé¡¾é—®å»ºè®®');
        }

        // ============================================
        // è¾…åŠ©å‡½æ•°
        // ============================================

        function insertSuggestion(text) {
            document.getElementById('user-input').value = text;
            document.getElementById('user-input').focus();
        }

        function handleKeyDown(event) {
            // Ctrl/Cmd + Enter å‘é€æ¶ˆæ¯
            if ((event.ctrlKey || event.metaKey) && event.key === 'Enter') {
                event.preventDefault();
                sendMessage();
            }
        }

        function addGameLog(text) {
            const logDiv = document.getElementById('game-log');
            const logItem = document.createElement('div');
            logItem.className = 'log-item';

            const time = document.createElement('div');
            time.className = 'log-time';
            time.textContent = `Day ${gameState.day} - ${new Date().toLocaleTimeString('zh-CN', {hour: '2-digit', minute: '2-digit'})}`;

            const content = document.createElement('div');
            content.textContent = text;

            logItem.appendChild(time);
            logItem.appendChild(content);

            logDiv.appendChild(logItem);

            // é™åˆ¶æ—¥å¿—æ¡æ•°
            while (logDiv.children.length > 10) {
                logDiv.removeChild(logDiv.firstChild);
            }
        }

        function showNotification(text) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = text;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // ============================================
        // åˆå§‹åŒ–
        // ============================================

        window.addEventListener('DOMContentLoaded', () => {
            updateUI();
            console.log('ğŸ® å¢é•¿é»‘å®¢æ¨¡æ‹Ÿå™¨ - AIå¯¹è¯ç‰ˆå·²å¯åŠ¨');

            // è‡ªåŠ¨èšç„¦è¾“å…¥æ¡†
            document.getElementById('user-input').focus();
        });

        // å®šæ—¶äº‹ä»¶ï¼ˆæ¯åˆ†é’Ÿï¼‰
        setInterval(() => {
            // æ¢å¤å°‘é‡ç²¾åŠ›
            if (gameState.energy < 100) {
                gameState.energy = Math.min(100, gameState.energy + 2);
                updateUI();
            }
        }, 60000);
    </script>
</body>
</html>
