<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¢é•¿å±æœºï¼šç”Ÿå­˜æ¸¸æˆ | Growth Crisis Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Georgia, 'Source Han Serif SC', 'Noto Serif SC', serif;
            background: linear-gradient(135deg, #2C1810 0%, #1A0F0A 100%);
            min-height: 100vh;
            color: #E8DCC4;
            padding: 20px;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: linear-gradient(135deg, #8B0000 0%, #4A0000 100%);
            padding: 20px 30px;
            border-radius: 15px;
            border: 3px solid #C9A961;
            box-shadow: 0 0 30px rgba(201, 169, 97, 0.3);
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2em;
            color: #C9A961;
            text-shadow: 0 0 10px rgba(201, 169, 97, 0.5);
            margin-bottom: 15px;
        }

        .status-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .status-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 15px;
            border-radius: 8px;
            border-left: 3px solid #C9A961;
        }

        .status-label {
            font-size: 0.85em;
            color: #A08040;
            margin-bottom: 5px;
        }

        .status-value {
            font-size: 1.3em;
            font-weight: bold;
            color: #FFD700;
        }

        .game-area {
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 20px;
        }

        .main-content {
            background: #1A1410;
            border-radius: 15px;
            border: 2px solid #C9A961;
            overflow: hidden;
        }

        .scenario-box {
            background: linear-gradient(135deg, #3A2010 0%, #2A1810 100%);
            padding: 25px;
            border-bottom: 2px solid #C9A961;
        }

        .scenario-title {
            font-size: 1.5em;
            color: #FFD700;
            margin-bottom: 15px;
        }

        .crisis-tag {
            display: inline-block;
            background: #8B0000;
            color: #FFD700;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: 10px;
        }

        .scenario-text {
            line-height: 1.8;
            white-space: pre-wrap;
            color: #E8DCC4;
        }

        .question-box {
            padding: 25px;
            background: #2C1810;
        }

        .question-title {
            font-size: 1.2em;
            color: #C9A961;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #C9A961;
        }

        .question-text {
            font-size: 1.1em;
            color: #FFD700;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .choices {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .choice-btn {
            background: linear-gradient(135deg, #3A2010 0%, #2A1810 100%);
            border: 2px solid #C9A961;
            color: #E8DCC4;
            padding: 18px 25px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
            font-size: 1em;
            text-align: left;
            position: relative;
        }

        .choice-btn:hover {
            background: linear-gradient(135deg, #C9A961 0%, #A08040 100%);
            color: #1A1410;
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(201, 169, 97, 0.4);
        }

        .choice-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .choice-detail {
            font-size: 0.85em;
            opacity: 0.8;
            margin-top: 8px;
        }

        .input-choice {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .input-choice input {
            flex: 1;
            background: #1A1410;
            border: 2px solid #C9A961;
            color: #E8DCC4;
            padding: 15px;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1em;
        }

        .input-choice button {
            background: linear-gradient(135deg, #C9A961 0%, #A08040 100%);
            color: #1A1410;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
        }

        .feedback {
            background: linear-gradient(135deg, #1A3A2A 0%, #0A2A1A 100%);
            border-left: 4px solid #4A9A6A;
            padding: 20px;
            margin-top: 20px;
            border-radius: 8px;
            animation: fadeIn 0.5s;
        }

        .feedback.negative {
            background: linear-gradient(135deg, #3A1A1A 0%, #2A0A0A 100%);
            border-left: 4px solid #9A4A4A;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback-title {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #FFD700;
        }

        .feedback-text {
            line-height: 1.6;
        }

        .continue-btn {
            background: linear-gradient(135deg, #C9A961 0%, #A08040 100%);
            color: #1A1410;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            font-size: 1em;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .sidebar-box {
            background: #1A1410;
            border: 2px solid #C9A961;
            border-radius: 12px;
            padding: 20px;
        }

        .sidebar-title {
            color: #C9A961;
            font-size: 1.1em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #C9A961;
        }

        .resource-item {
            margin-bottom: 15px;
        }

        .resource-label {
            font-size: 0.85em;
            color: #A08040;
            margin-bottom: 5px;
        }

        .resource-value {
            font-size: 1.1em;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 8px;
        }

        .resource-bar {
            height: 8px;
            background: #3A2010;
            border-radius: 4px;
            overflow: hidden;
        }

        .resource-fill {
            height: 100%;
            background: linear-gradient(90deg, #C9A961 0%, #FFD700 100%);
            transition: width 0.5s;
        }

        .event-item {
            background: #3A2010;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 0.9em;
            border-left: 3px solid #C9A961;
        }

        .event-time {
            font-size: 0.75em;
            color: #A08040;
            margin-bottom: 5px;
        }

        .progress-step {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .step-number {
            width: 25px;
            height: 25px;
            background: #3A2010;
            border: 2px solid #C9A961;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }

        .step-number.active {
            background: #C9A961;
            color: #1A1410;
        }

        .step-number.completed {
            background: #4A9A6A;
            border-color: #4A9A6A;
        }

        @media (max-width: 768px) {
            .game-area {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>âš ï¸ å¢é•¿å±æœºï¼šç”Ÿå­˜æ¸¸æˆ</h1>
            <div class="status-bar">
                <div class="status-item">
                    <div class="status-label">ğŸ“… å‰©ä½™å¤©æ•°</div>
                    <div class="status-value" id="days-left">14å¤©</div>
                </div>
                <div class="status-item">
                    <div class="status-label">ğŸ’° å‰©ä½™é¢„ç®—</div>
                    <div class="status-value" id="budget">$10,000</div>
                </div>
                <div class="status-item">
                    <div class="status-label">ğŸ‘¥ æ´»è·ƒç”¨æˆ·</div>
                    <div class="status-value" id="users">5,000</div>
                </div>
                <div class="status-item">
                    <div class="status-label">ğŸ“Š ç•™å­˜ç‡</div>
                    <div class="status-value" id="retention">35%</div>
                </div>
            </div>
        </div>

        <div class="game-area">
            <div class="main-content">
                <div class="scenario-box">
                    <div class="scenario-title" id="scenario-title">
                        ç¬¬1å…³ï¼šç”¨æˆ·æš´è·Œå±æœº<span class="crisis-tag">æé™æŒ‘æˆ˜</span>
                    </div>
                    <div class="scenario-text" id="scenario-text">
æ­£åœ¨åŠ è½½åœºæ™¯...
                    </div>
                </div>

                <div class="question-box">
                    <div class="question-title">ğŸ¯ å†³ç­–ç‚¹ #<span id="step-number">1</span></div>
                    <div class="question-text" id="question-text">æ­£åœ¨åŠ è½½é—®é¢˜...</div>
                    <div id="choices-container"></div>
                    <div id="feedback-container"></div>
                </div>
            </div>

            <div class="sidebar">
                <div class="sidebar-box">
                    <div class="sidebar-title">ğŸ“ˆ èµ„æºç›‘æ§</div>
                    <div class="resource-item">
                        <div class="resource-label">ç°é‡‘æµ</div>
                        <div class="resource-value" id="cash-display">$10,000</div>
                        <div class="resource-bar">
                            <div class="resource-fill" id="cash-bar" style="width: 100%"></div>
                        </div>
                    </div>
                    <div class="resource-item">
                        <div class="resource-label">ç”¨æˆ·å¢é•¿</div>
                        <div class="resource-value" id="growth-display">-20%/å¤©</div>
                        <div class="resource-bar">
                            <div class="resource-fill" id="growth-bar" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="resource-item">
                        <div class="resource-label">å›¢é˜Ÿå£«æ°”</div>
                        <div class="resource-value" id="morale-display">60%</div>
                        <div class="resource-bar">
                            <div class="resource-fill" id="morale-bar" style="width: 60%"></div>
                        </div>
                    </div>
                </div>

                <div class="sidebar-box">
                    <div class="sidebar-title">ğŸ“‹ å†³ç­–è¿›åº¦</div>
                    <div id="progress-steps"></div>
                </div>

                <div class="sidebar-box">
                    <div class="sidebar-title">ğŸ“° æœ€æ–°äº‹ä»¶</div>
                    <div id="events-list"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        const gameState = {
            day: 1,
            daysLeft: 14,
            budget: 10000,
            users: 5000,
            retention: 35,
            growth: -20,
            morale: 60,
            currentStep: 0,
            decisions: [],
            score: 0
        };

        // æ¸¸æˆæµç¨‹ - æ¯ä¸€æ­¥éƒ½æ˜¯å…·ä½“çš„å°é—®é¢˜
        const gameFlow = [
            // === ç¬¬ä¸€æ­¥ï¼šç´§æ€¥åˆ†æ ===
            {
                scenario: `**èƒŒæ™¯ï¼š**
ä½ æ˜¯FitGoå¥èº«Appçš„å¢é•¿è´Ÿè´£äººã€‚

æ˜¨å¤©æ™šä¸Šï¼Œç«å“FitnessProçªç„¶å®£å¸ƒï¼šæ‰€æœ‰ä»˜è´¹åŠŸèƒ½æ°¸ä¹…å…è´¹ï¼

**ç¾éš¾æ•°æ®ï¼š**
- 24å°æ—¶å†…ï¼Œä½ çš„ç”¨æˆ·ä»10,000è·Œåˆ°5,000äºº
- è¿˜åœ¨ä»¥æ¯å¤©20%çš„é€Ÿåº¦ç»§ç»­æµå¤±
- é“¶è¡Œè´¦æˆ·åªå‰©$10,000
- å›¢é˜Ÿ6äººï¼Œæœˆå·¥èµ„$18,000
- æŠ•èµ„äººé™æœŸï¼š2å‘¨å†…æ‰­è½¬å±€é¢

ç°åœ¨æ˜¯æ˜ŸæœŸä¸€æ—©ä¸Š9ç‚¹ï¼ŒæŠ•èµ„äºº12ç‚¹è¦å¼€ç´§æ€¥ä¼šè®®ã€‚`,
                question: "ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šåœ¨å’ŒæŠ•èµ„äººå¼€ä¼šå‰ï¼Œä½ æœ‰3å°æ—¶ã€‚æœ€ç´§æ€¥è¦åšçš„æ˜¯ä»€ä¹ˆï¼Ÿ",
                choices: [
                    {
                        text: "ç«‹å³åšç”¨æˆ·æµå¤±åˆ†æ",
                        detail: "å¯¼å‡ºæ•°æ®ï¼Œåˆ†ææµå¤±ç”¨æˆ·ç”»åƒå’Œæµå¤±åŸå› ",
                        effects: { time: 2, data: true },
                        feedback: {
                            title: "âœ… æ­£ç¡®å†³ç­–",
                            text: `èªæ˜ï¼æ•°æ®ä¼˜å…ˆã€‚

ä½ å¿«é€Ÿåˆ†æå‘ç°ï¼š
- æµå¤±çš„ä¸»è¦æ˜¯å…è´¹ç”¨æˆ·ï¼ˆå 80%ï¼‰
- ä»˜è´¹ç”¨æˆ·æµå¤±ç‡åªæœ‰5%
- æµå¤±åŸå› ï¼šç«å“åŠŸèƒ½å…è´¹ï¼Œè§‰å¾—ä½ ä»¬å¤ªè´µ

**å…³é”®å‘ç°ï¼š**
ä»˜è´¹ç”¨æˆ·å…¶å®å¾ˆç¨³å®šï¼è¿™è¯´æ˜ä½ ä»¬çš„æ ¸å¿ƒä»·å€¼è¢«è®¤å¯ã€‚

æŠ•èµ„äººä¼šè®®å‰ï¼Œä½ è‡³å°‘æœ‰æ•°æ®æ”¯æ’‘ã€‚`,
                            positive: true
                        }
                    },
                    {
                        text: "å¬é›†å›¢é˜Ÿç´§æ€¥å¼€ä¼š",
                        detail: "å…ˆç¨³å®šå†›å¿ƒï¼Œè®¨è®ºåº”å¯¹ç­–ç•¥",
                        effects: { time: 2, morale: 5 },
                        feedback: {
                            title: "âš ï¸ æ¬¡ä¼˜é€‰æ‹©",
                            text: `å›¢é˜Ÿç¨³å®šå¾ˆé‡è¦ï¼Œä½†ç°åœ¨æœ€ç¼ºçš„æ˜¯æ•°æ®ã€‚

ä¼šä¸Šå¤§å®¶ä¸ƒå˜´å…«èˆŒï¼š
- äº§å“ç»ç†ï¼šè¦ä¸æˆ‘ä»¬ä¹Ÿå…è´¹ï¼Ÿ
- å·¥ç¨‹å¸ˆï¼šè¦ä¸åŠ æ–°åŠŸèƒ½ï¼Ÿ
- å¸‚åœºï¼šè¦ä¸åšå¹¿å‘Šï¼Ÿ

è®¨è®ºäº†2å°æ—¶ï¼Œæ²¡æœ‰æ•°æ®æ”¯æ’‘ï¼Œéƒ½æ˜¯çŒœæµ‹ã€‚

æŠ•èµ„äººä¼šä¸Šä½ å¾ˆéš¾è¯´æœå¯¹æ–¹...`,
                            positive: false
                        }
                    },
                    {
                        text: "ç«‹å³å‘å…¬å‘Šå®‰æŠšç”¨æˆ·",
                        detail: "å…ˆç¨³ä½ç”¨æˆ·ï¼Œé˜²æ­¢ç»§ç»­æµå¤±",
                        effects: { time: 1, users: -500 },
                        feedback: {
                            title: "âŒ ç³Ÿç³•å†³ç­–",
                            text: `æ²¡æœ‰ç­–ç•¥å°±å‘å…¬å‘Š = ç«ä¸Šæµ‡æ²¹ï¼

ä½ å‘äº†ï¼š"æˆ‘ä»¬ä¼šæ›´å¥½ï¼è¯·ç›¸ä¿¡æˆ‘ä»¬ï¼"

ç”¨æˆ·è¯„è®ºï¼š
- "è¯´å…·ä½“ç‚¹å•Šï¼Ÿ"
- "ç«å“éƒ½å…è´¹äº†ï¼Œä½ ä»¬è¿˜æ”¶è´¹ï¼Ÿ"
- "ç©ºè¯ï¼Œå–å…³äº†"

åˆæµå¤±äº†500ä¸ªç”¨æˆ·ã€‚æŠ•èµ„äººçœ‹åˆ°äº†ï¼Œæ›´åŠ æ‹…å¿ƒ...`,
                            positive: false
                        }
                    }
                ],
                next: 1
            },

            // === ç¬¬äºŒæ­¥ï¼šæŠ•èµ„äººä¼šè®® ===
            {
                scenario: `**æŠ•èµ„äººä¼šè®®å®¤ï¼Œ12:00**

åœ¨åœºçš„äººï¼š
- Tomï¼ˆæŠ•èµ„äººï¼‰ï¼šçœ‹èµ·æ¥å¾ˆæ‹…å¿ƒ
- Sarahï¼ˆCEOï¼‰ï¼šç„¦è™‘åœ°çœ‹ç€ä½ 

Tomç›´æˆªäº†å½“ï¼š"FitnessProå…è´¹äº†ï¼Œæˆ‘ä»¬çš„ç«äº‰ä¼˜åŠ¿è¿˜åœ¨å—ï¼Ÿ"`,
                question: "ä½ è¦æ€ä¹ˆå›ç­”ï¼Ÿï¼ˆé€‰æ‹©è®ºæ®ï¼‰",
                choices: [
                    {
                        text: "å¼ºè°ƒä»˜è´¹ç”¨æˆ·å¾ˆç¨³å®š",
                        detail: "ä»˜è´¹ç”¨æˆ·æµå¤±ç‡åªæœ‰5%ï¼Œè¯´æ˜æ ¸å¿ƒä»·å€¼è¢«è®¤å¯",
                        effects: { investor_confidence: 20 },
                        feedback: {
                            title: "âœ… æœ‰åŠ›è®ºæ®",
                            text: `Tomçœ¼ç›ä¸€äº®ï¼š"è¿™ä¸ªæ•°æ®ä¸é”™ã€‚"

ä»–ç»§ç»­é—®ï¼š"é‚£æˆ‘ä»¬çš„ä»˜è´¹è½¬åŒ–ç‡æ˜¯å¤šå°‘ï¼Ÿ"

ä½ æŸ¥çœ‹æ•°æ®ï¼š
- ä»˜è´¹ç”¨æˆ·ï¼š800äºº
- å…è´¹ç”¨æˆ·æµå¤±å‰æœ‰ï¼š9200äºº
- è½¬åŒ–ç‡ = 800/10000 = 8%

Tomï¼š"8%çš„è½¬åŒ–ç‡ï¼Œè¯´æ˜æœ‰ä»·å€¼ã€‚ä½†é—®é¢˜æ˜¯ï¼Œæ–°ç”¨æˆ·è¿˜ä¼šæ¥å—ï¼Ÿ"`,
                            positive: true
                        }
                    },
                    {
                        text: "è¯´æˆ‘ä»¬åŠŸèƒ½æ›´å¥½",
                        detail: "æˆ‘ä»¬çš„è®­ç»ƒè®¡åˆ’æ›´ç§‘å­¦ã€æ›´ä¸ªæ€§åŒ–",
                        effects: { investor_confidence: -10 },
                        feedback: {
                            title: "âŒ æ— åŠ›åé©³",
                            text: `Tomç›´æ¥æ‰“æ–­ï¼š"ç«å“ç°åœ¨å…è´¹äº†ï¼ŒåŠŸèƒ½ä¹Ÿä¸å·®ã€‚"

Sarahä¹Ÿçš±çœ‰ï¼š"ç”¨æˆ·ä¸ä¼šç®¡è°æ›´å¥½ï¼Œä»–ä»¬åªçœ‹è°å…è´¹ã€‚"

æ°”æ°›å˜å¾—æ›´ç´§å¼ äº†...

Tomï¼š"æˆ‘éœ€è¦çœ‹åˆ°å…·ä½“çš„æ•°æ®å’Œè®¡åˆ’ï¼Œä¸æ˜¯ç©ºè¯ã€‚"`,
                            positive: false
                        }
                    },
                    {
                        text: "æ‰¿è®¤åŠ£åŠ¿ï¼Œä½†æå‡ºæ–°å®šä½",
                        detail: "æˆ‘ä»¬ä¸åº”è¯¥å’Œä»–ä»¬æ¯”å…è´¹ï¼Œåº”è¯¥åšé«˜ç«¯è·¯çº¿",
                        effects: { investor_confidence: 10 },
                        feedback: {
                            title: "âš ï¸ æœ‰æƒ³æ³•ï¼Œä½†éœ€è¦è¯æ˜",
                            text: `Tomè‹¥æœ‰æ‰€æ€ï¼š"é«˜ç«¯è·¯çº¿...æœ‰æ„æ€ã€‚"

ä½†ä»–é©¬ä¸Šè¿½é—®ï¼š"é‚£ä½ è¦æ€ä¹ˆè¯æ˜é«˜ç«¯ç”¨æˆ·æ„¿æ„ä»˜è´¹ï¼Ÿ"

Sarahä¹Ÿé—®ï¼š"æˆ‘ä»¬æœ‰é«˜ç«¯çš„èµ„æœ¬å—ï¼Ÿæ•™ç»ƒèµ„æºã€å†…å®¹è´¨é‡éƒ½éœ€è¦æŠ•å…¥ã€‚"

Tomï¼š"ç»™ä½ 2å‘¨æ—¶é—´éªŒè¯è¿™ä¸ªå‡è®¾ã€‚å¦‚æœè¯æ˜ä¸äº†ï¼Œå°±è¦è€ƒè™‘å…¶ä»–æ–¹å‘äº†ã€‚"`,
                            positive: true
                        }
                    }
                ],
                next: 2
            },

            // === ç¬¬ä¸‰æ­¥ï¼šé¢„ç®—åˆ†é… ===
            {
                scenario: `**ä¼šè®®ç»“æŸï¼Œä¸‹åˆ2ç‚¹**

Tomæœ€åè¯´ï¼š"æˆ‘å†ç»™ä½ ä»¬$5,000åº”æ€¥é¢„ç®—ï¼Œä½†è¿™æ˜¯æœ€åä¸€ç¬”äº†ã€‚"

ç°åœ¨ä½ æœ‰$15,000ï¼Œå¿…é¡»å†³å®šæ€ä¹ˆèŠ±ã€‚

å›¢é˜Ÿåœ¨ç­‰ä½ çš„æŒ‡ç¤ºã€‚`,
                question: "é¢„ç®—åˆ†é…ï¼š$15,000æ€ä¹ˆèŠ±ï¼Ÿï¼ˆé€‰ä¸€ä¸ªç­–ç•¥ï¼‰",
                choices: [
                    {
                        text: "é‡é‡‘æŠ•æ”¾å¹¿å‘Šè·å®¢",
                        detail: "$10,000ä¹°å¹¿å‘Šï¼Œå‰©$5,000åšè¿è¥",
                        effects: { budget: -10000, users: 3000, quality: 'low' },
                        feedback: {
                            title: "âŒ æ¼æ¡¶æ•ˆåº”",
                            text: `ä½ æŠ•äº†$10,000å¹¿å‘Šã€‚

3å¤©åï¼š
- æ–°å¢3000ä¸ªå…è´¹ç”¨æˆ·
- ä½†ç•™å­˜ç‡åªæœ‰10%ï¼ˆç¬¬äºŒå¤©90%å°±èµ°äº†ï¼‰
- 3å¤©ååªå‰©300äºº

**ææ€–è®¡ç®—ï¼š**
- CAC = $10,000 / 3000 = $3.33/äºº
- ç•™å­˜åå®é™…è·å®¢ = 300äºº
- å®é™…CAC = $10,000 / 300 = $33/äººï¼

é’±çƒ§å®Œäº†ï¼Œç”¨æˆ·è¿˜åœ¨æµå¤±...

å‰©ä½™é¢„ç®—ï¼š$5,000
å›¢é˜Ÿå£«æ°”ï¼š-20%`,
                            positive: false
                        }
                    },
                    {
                        text: "å…¨åŠ›åšç•™å­˜ä¼˜åŒ–",
                        detail: "$5,000åšç”¨æˆ·è°ƒç ”å’ŒåŠŸèƒ½è¿­ä»£ï¼Œçœé’±",
                        effects: { budget: -5000, retention: 15 },
                        feedback: {
                            title: "âœ… æŠ“ä½æœ¬è´¨",
                            text: `èªæ˜çš„é€‰æ‹©ï¼ç•™å­˜>è·å®¢ã€‚

ä½ çš„è¡ŒåŠ¨ï¼š
1. èŠ±$2000è¯·è°ƒç ”å…¬å¸è®¿è°ˆ100ä¸ªç”¨æˆ·
2. èŠ±$3000å¤–åŒ…åšåŠŸèƒ½ä¼˜åŒ–

**7å¤©åçš„æ•°æ®ï¼š**
- ç•™å­˜ç‡ä»35%æå‡åˆ°50%ï¼ˆ+15%ï¼‰
- è™½ç„¶è¿˜åœ¨æµå¤±ï¼Œä½†é€Ÿåº¦ä»20%/å¤©é™åˆ°10%/å¤©
- ä»˜è´¹ç”¨æˆ·å¼€å§‹å£ç¢‘ä¼ æ’­

Tomå‘æ¥æ¶ˆæ¯ï¼š"æ•°æ®æœ‰èµ·è‰²ï¼Œç»§ç»­ï¼"

å‰©ä½™é¢„ç®—ï¼š$10,000
å£«æ°”ï¼š+15%`,
                            positive: true
                        }
                    },
                    {
                        text: "å°è¯•ç—…æ¯’æ¨èæœºåˆ¶",
                        detail: "$8,000å¼€å‘æ¨èç³»ç»Ÿ + $2,000å¥–åŠ±",
                        effects: { budget: -10000, viral: true },
                        feedback: {
                            title: "âš ï¸ èµŒåšç­–ç•¥",
                            text: `ä½ å¼€å‘äº†æ¨èç³»ç»Ÿï¼šé‚€è¯·å¥½å‹åŒæ–¹å„å¾—14å¤©ä¼šå‘˜ã€‚

**5å¤©åä¸Šçº¿ï¼š**
- å¹³å‡æ¯äººé‚€è¯·1.2ä¸ªå¥½å‹
- è½¬åŒ–ç‡18%
- Kå€¼ = 1.2 Ã— 0.18 = 0.216

K<1ï¼Œè¿˜æ˜¯çº¿æ€§è¡°å‡...

ä½†æœ‰ä¸ªæ„å¤–å‘ç°ï¼š
- é€šè¿‡æ¨èæ¥çš„ç”¨æˆ·ç•™å­˜ç‡60%ï¼ˆæ¯”å¹¿å‘Šé«˜ï¼ï¼‰
- è™½ç„¶å¢é•¿æ…¢ï¼Œä½†è´¨é‡å¥½

æœ‰ç‚¹æ•ˆæœï¼Œä½†ä¸å¤Ÿå¿«...

å‰©ä½™é¢„ç®—ï¼š$5,000`,
                            positive: true
                        }
                    }
                ],
                next: 3
            },

            // === ç¬¬å››æ­¥ï¼šæ•°æ®é©±åŠ¨å†³ç­– ===
            {
                scenario: `**ç¬¬7å¤©ï¼Œæ•°æ®å¤ç›˜**

ä½ ç°åœ¨çš„æ•°æ®ï¼š
- ç”¨æˆ·ï¼š4,500äººï¼ˆè¿˜åœ¨æ…¢æ…¢æµå¤±ï¼‰
- ä»˜è´¹ç”¨æˆ·ï¼š780äººï¼ˆç¨³å®šï¼‰
- ç•™å­˜ç‡ï¼š50%ï¼ˆæå‡äº†ï¼‰
- é¢„ç®—ï¼š$5,000-$10,000ï¼ˆå–å†³äºä¸Šä¸€æ­¥ï¼‰

Tomè¦æ±‚ä½ è®¡ç®—ï¼šå¦‚æœä¿æŒç°çŠ¶ï¼Œèƒ½æ’‘å¤šä¹…ï¼Ÿ`,
                question: "å…³é”®è®¡ç®—ï¼šä»¥å½“å‰ç•™å­˜ç‡ï¼Œä½ èƒ½æ’‘è¿‡2å‘¨å—ï¼Ÿï¼ˆæç¤ºï¼šè€ƒè™‘å·¥èµ„ï¼‰",
                choices: [
                    {
                        text: "èƒ½ï¼Œå› ä¸ºä»˜è´¹ç”¨æˆ·ä¼šå¸¦æ¥æ”¶å…¥",
                        detail: "780ä¸ªä»˜è´¹ç”¨æˆ· Ã— $20/æœˆ = $15,600/æœˆ",
                        effects: {},
                        feedback: {
                            title: "âœ… è®¡ç®—æ­£ç¡®",
                            text: `å¾ˆå¥½ï¼ä½ ç®—å‡ºäº†Unit Economicsï¼š

**æ”¶å…¥ç«¯ï¼š**
- 780ä»˜è´¹ç”¨æˆ· Ã— $20/æœˆ = $15,600/æœˆ
- æœˆæ”¶å…¥å¯ä»¥è¦†ç›–å·¥èµ„ï¼ˆ$18,000ï¼‰çš„86%

**æ”¯å‡ºç«¯ï¼š**
- å·¥èµ„ï¼š$18,000/æœˆ
- æœåŠ¡å™¨ï¼š$1,500/æœˆ
- æ€»æ”¯å‡ºï¼š$19,500/æœˆ

**ç¼ºå£ï¼š**
- æ¯æœˆäºæŸï¼š$3,900
- $10,000èƒ½æ’‘ï¼š2.5ä¸ªæœˆ

**ç»“è®ºï¼šèƒ½æ’‘è¿‡2å‘¨ï¼ä½†é•¿æœŸå¿…é¡»å¢é•¿ã€‚**

Tomï¼š"å¥½ï¼Œé‚£æ¥ä¸‹æ¥æ€ä¹ˆå¢é•¿ï¼Ÿ"`,
                            positive: true
                        }
                    },
                    {
                        text: "ä¸èƒ½ï¼Œç”¨æˆ·ä¸€ç›´åœ¨æµå¤±",
                        detail: "æ¯å¤©æµå¤±10%ï¼Œå¾ˆå¿«å°±æ²¡ç”¨æˆ·äº†",
                        effects: {},
                        feedback: {
                            title: "âŒ è¿‡äºæ‚²è§‚",
                            text: `è¿™ä¸ªåˆ¤æ–­å¤ªè¡¨é¢äº†ï¼

è™½ç„¶å…è´¹ç”¨æˆ·åœ¨æµå¤±ï¼Œä½†ï¼š
- ä»˜è´¹ç”¨æˆ·ç•™å­˜ç‡85%ï¼ˆå¾ˆç¨³å®šï¼‰
- ä»–ä»¬äº§ç”Ÿçš„MRRæ˜¯$15,600
- å¯ä»¥è¦†ç›–å¤§éƒ¨åˆ†æˆæœ¬

ä½ éœ€è¦åŒºåˆ†ï¼š
- è™šè£æŒ‡æ ‡ï¼ˆæ€»ç”¨æˆ·æ•°ï¼‰
- æ ¸å¿ƒæŒ‡æ ‡ï¼ˆä»˜è´¹ç”¨æˆ·ã€MRRã€ç•™å­˜ç‡ï¼‰

æŠ•èµ„äººè¦çš„æ˜¯ç†æ€§åˆ†æï¼Œä¸æ˜¯ææ…Œã€‚`,
                            positive: false
                        }
                    },
                    {
                        text: "ä¸ç¡®å®šï¼Œéœ€è¦æ›´å¤šæ•°æ®",
                        detail: "è®©æˆ‘å†åˆ†æä¸€ä¸‹",
                        effects: {},
                        feedback: {
                            title: "âš ï¸ æ—¶é—´ä¸ç­‰äºº",
                            text: `Tomæœ‰ç‚¹ä¸è€çƒ¦ï¼š"ç°åœ¨æ˜¯ç¬¬7å¤©ï¼Œè¿˜å‰©7å¤©ï¼Œä¸èƒ½å†ç­‰äº†ã€‚"

Sarahæé†’ä½ ï¼š"ç”¨ç°æœ‰æ•°æ®åšå†³ç­–ï¼Œè¿™å°±æ˜¯åˆ›ä¸šã€‚"

åŸºæœ¬è®¡ç®—ï¼š
- æœˆæ”¶å…¥ â‰ˆ $15,600ï¼ˆä»˜è´¹ç”¨æˆ·ï¼‰
- æœˆæ”¯å‡º â‰ˆ $19,500ï¼ˆå·¥èµ„+æˆæœ¬ï¼‰
- æœˆç¼ºå£ â‰ˆ $3,900

ç°åœ¨é¢„ç®—è¿˜æœ‰$10,000å·¦å³ï¼Œèƒ½æ’‘2-3ä¸ªæœˆã€‚

ä½†2å‘¨å†…å¿…é¡»è¯æ˜å¢é•¿æ½œåŠ›ï¼`,
                            positive: false
                        }
                    }
                ],
                next: 4
            },

            // === ç¬¬äº”æ­¥ï¼šå…³é”®å®éªŒ ===
            {
                scenario: `**ç¬¬8å¤©ï¼Œå…³é”®å†³ç­–**

Tomï¼š"ç°åœ¨ä½ è¦è¯æ˜å¢é•¿æ½œåŠ›ã€‚æˆ‘ç»™ä½ æœ€å$5,000ã€‚"

"ç”¨è¿™ç¬”é’±åšä¸€ä¸ªå®éªŒï¼Œè¯æ˜ï¼š
1. ä½ èƒ½è·å–é«˜è´¨é‡ç”¨æˆ·
2. LTV > CAC
3. å¯ä»¥è§„æ¨¡åŒ–"

"2å‘¨åæˆ‘è¦çœ‹ROIæ•°æ®ã€‚"`,
                question: "å®éªŒè®¾è®¡ï¼š$5,000æ€ä¹ˆç”¨ï¼Ÿ",
                choices: [
                    {
                        text: "ç²¾å‡†æŠ•æ”¾é«˜ç«¯ç”¨æˆ·",
                        detail: "Google Adså®šå‘ï¼šå¥èº«æ•™ç»ƒã€è¿åŠ¨å‘˜ã€$5/CPC",
                        effects: { budget: -5000 },
                        feedback: {
                            title: "âœ… ç²¾å‡†ç­–ç•¥",
                            text: `å®éªŒè®¾è®¡ï¼š
- é¢„ç®—ï¼š$5,000
- CPCï¼š$5
- ç‚¹å‡»é‡ï¼š1,000
- è½åœ°é¡µè½¬åŒ–ç‡ï¼šå‡è®¾10%
- é¢„æœŸæ³¨å†Œï¼š100äºº
- ä»˜è´¹è½¬åŒ–ç‡ï¼šå‡è®¾15%
- é¢„æœŸä»˜è´¹ç”¨æˆ·ï¼š15äºº

**5å¤©åå®é™…æ•°æ®ï¼š**
- æ³¨å†Œï¼š120äººï¼ˆè¶…é¢„æœŸï¼ï¼‰
- ä»˜è´¹ï¼š22äººï¼ˆ18%è½¬åŒ–ç‡ï¼‰
- CAC = $5,000/22 = $227

**LTVè®¡ç®—ï¼š**
- å®¢å•ä»·$20/æœˆ
- å¹³å‡ç•™å­˜8ä¸ªæœˆ
- LTV = $20 Ã— 8 = $160

âš ï¸ ç­‰ç­‰ï¼ŒLTV < CACï¼Ÿï¼

ä½†ä½ å‘ç°ï¼šè¿™æ‰¹ç”¨æˆ·æ¨èç‡å¾ˆé«˜ï¼
- å¹³å‡æ¯äººæ¨è0.8ä¸ªå¥½å‹
- å®é™…CACä¸‹é™30%

Tomï¼š"åŠæ ¼äº†ï¼Œä½†éœ€è¦ä¼˜åŒ–CACã€‚"`,
                            positive: true
                        }
                    },
                    {
                        text: "å†…å®¹è¥é”€+SEO",
                        detail: "å†™10ç¯‡æ·±åº¦å¥èº«æ–‡ç« ï¼Œåšé•¿æœŸæµé‡",
                        effects: { budget: -3000 },
                        feedback: {
                            title: "âš ï¸ æ—¶é—´ä¸å¤Ÿ",
                            text: `ä½ èŠ±$3,000è¯·äº†å†™æ‰‹ï¼Œå†™äº†10ç¯‡ç²¾å“æ–‡ç« ã€‚

å†…å®¹ç¡®å®ä¸é”™ï¼Œä½†ï¼š
- SEOéœ€è¦3-6ä¸ªæœˆæ‰æœ‰æ•ˆæœ
- 2å‘¨å†…å‡ ä¹æ²¡æœ‰æµé‡
- æ— æ³•å‘æŠ•èµ„äººè¯æ˜çŸ­æœŸæ•ˆæœ

Tomï¼š"æ–¹å‘å¯¹ï¼Œä½†ç°åœ¨ç­‰ä¸äº†ã€‚"

Sarahï¼š"æˆ‘ä»¬éœ€è¦èƒ½å¿«é€ŸéªŒè¯çš„ç­–ç•¥ã€‚"

è¿˜å‰©$2,000å’Œ5å¤©æ—¶é—´...`,
                            positive: false
                        }
                    },
                    {
                        text: "åŠçº¿ä¸‹å¥èº«æ´»åŠ¨",
                        detail: "ç¤¾åŒºæ´»åŠ¨ä½“éªŒè¯¾ï¼Œ$5,000åŠ5åœº",
                        effects: { budget: -5000, users: 150 },
                        feedback: {
                            title: "âœ… é«˜è´¨é‡è·å®¢",
                            text: `ä½ åœ¨5ä¸ªé«˜ç«¯ç¤¾åŒºåŠäº†å…è´¹ä½“éªŒè¯¾ï¼š

**ç»“æœï¼š**
- å‚ä¸äººæ•°ï¼š150äºº
- å½“åœºä»˜è´¹ï¼š45äººï¼ˆ30%ï¼ï¼‰
- CAC = $5,000/45 = $111

**è´¨é‡åˆ†æï¼š**
- è¿™äº›ç”¨æˆ·ç•™å­˜ç‡ï¼š75%
- æ¨èç‡ï¼š40%
- LTVé¢„ä¼°ï¼š$20 Ã— 12æœˆ = $240

**ROIè®¡ç®—ï¼š**
- LTV/CAC = $240/$111 = 2.16
- å¥åº·æ¯”ä¾‹ï¼ï¼ˆé€šå¸¸>3æ›´å¥½ï¼‰

Tomï¼š"è¿™ä¸ªæ¨¡å¼å¯ä»¥ï¼ä½†èƒ½è§„æ¨¡åŒ–å—ï¼Ÿ"

ä½ å›ï¼š"å¯ä»¥åŸ¹è®­æ•™ç»ƒï¼Œå¤åˆ¶åˆ°æ›´å¤šç¤¾åŒºã€‚"

Tomç¬‘äº†ï¼š"å¥½ï¼Œè¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚"`,
                            positive: true
                        }
                    }
                ],
                next: 5
            },

            // === ç¬¬å…­æ­¥ï¼šæœ€ç»ˆç­”è¾© ===
            {
                scenario: `**ç¬¬14å¤©ï¼ŒæŠ•èµ„äººæœ€ç»ˆè¯„å®¡**

Tomçœ‹ç€ä½ çš„æ•°æ®æŠ¥å‘Šï¼š

"2å‘¨æ—¶é—´ï¼š
- ç”¨æˆ·ä»5,000æ‰åˆ°3,800ï¼ˆå¯æ§æµå¤±ï¼‰
- ä»˜è´¹ç”¨æˆ·ä»800å‡åˆ°950ï¼ˆ+18.75%ï¼‰
- MRRä»$16,000å‡åˆ°$19,000
- æ‰¾åˆ°äº†å¯è¡Œçš„å¢é•¿æ¸ é“

è¿˜ä¸é”™ã€‚"

ä»–åˆä¸Šæ–‡ä»¶å¤¹ï¼š`,
                question: "Tomé—®ï¼šå¦‚æœæˆ‘å†ç»™ä½ $50,000ï¼Œä½ è¦å¤šä¹…å›æœ¬ï¼Ÿ",
                choices: [
                    {
                        text: "3ä¸ªæœˆï¼Œä¿å®ˆç­–ç•¥",
                        detail: "æŠ•æ”¾éªŒè¯è¿‡çš„æ¸ é“ï¼Œä¼˜åŒ–CACåˆ°$80",
                        effects: {},
                        feedback: {
                            title: "âœ… è¿‡å…³ï¼",
                            text: `Tomç‚¹å¤´ï¼š"ä¿å®ˆä½†å¯è¡Œã€‚"

**ä½ çš„è®¡ç®—ï¼š**
- $50,000é¢„ç®—
- CACä¼˜åŒ–åˆ°$80ï¼ˆé€šè¿‡è§„æ¨¡æ•ˆåº”ï¼‰
- å¯è·å–ï¼š625ä¸ªä»˜è´¹ç”¨æˆ·
- LTV = $240
- å›æ”¶å‘¨æœŸ = $80/$20 = 4ä¸ªæœˆ

ä½†3ä¸ªæœˆå°±èƒ½å›æœ¬80%ï¼Œå‰©ä¸‹çš„æ˜¯åˆ©æ¶¦ã€‚

Sarahæ¿€åŠ¨åœ°è¯´ï¼š"æˆ‘ä»¬æ‰¾åˆ°PMFäº†ï¼"

Tomï¼š"å¥½ï¼Œæˆ‘è¿½æŠ•$200,000ã€‚æ¡ä»¶æ˜¯ï¼š
1. 3ä¸ªæœˆå†…MRRè¾¾åˆ°$50,000
2. CACæ§åˆ¶åœ¨$100ä»¥å†…
3. ç•™å­˜ç‡ä¿æŒ60%+

åšå¾—åˆ°å—ï¼Ÿ"

ä½ æ·±å¸ä¸€å£æ°”ï¼š"åšå¾—åˆ°ï¼"

**ğŸ‰ æ¸¸æˆé€šå…³ï¼**

**å¾—åˆ†æ€»ç»“ï¼š**
ä½ åœ¨æé™æ¡ä»¶ä¸‹ï¼š
âœ… ä¿ä½äº†å…¬å¸
âœ… æ‰¾åˆ°äº†å¢é•¿æ¸ é“
âœ… è¯æ˜äº†å•†ä¸šæ¨¡å¼
âœ… è·å¾—äº†æ–°èèµ„

è¿™å°±æ˜¯çœŸæ­£çš„å¢é•¿é»‘å®¢ï¼`,
                            positive: true,
                            end: true
                        }
                    },
                    {
                        text: "1ä¸ªæœˆï¼Œæ¿€è¿›ç­–ç•¥",
                        detail: "å…¨åŠ›æŠ•æ”¾ï¼Œå¿«é€Ÿå›æœ¬",
                        effects: {},
                        feedback: {
                            title: "âŒ å¤ªå†’é™©",
                            text: `Tomæ‘‡å¤´ï¼š"1ä¸ªæœˆå¤ªæ¿€è¿›ã€‚"

"$50,000å…¨æŠ•å‡ºå»ï¼š
- å°±ç®—CACé™åˆ°$50
- ä¹Ÿåªèƒ½è·1000ä¸ªä»˜è´¹ç”¨æˆ·
- MRRå¢åŠ $20,000

ä½†ä½ çš„ï¼š
- å›¢é˜Ÿå¸¦å®½æœ‰é™
- æœåŠ¡èƒ½åŠ›æœ‰ä¸Šé™
- ç•™å­˜ç‡å¯èƒ½ä¸‹é™

è¿‡åº¦å¢é•¿ = è´¨é‡å¤±æ§ = ç”¨æˆ·æµå¤± = æ­»äº¡èºæ—‹"

Sarahä¹Ÿè¯´ï¼š"æˆ‘ä»¬è¦å¯æŒç»­å¢é•¿ï¼Œä¸æ˜¯é¥®é¸©æ­¢æ¸´ã€‚"

Tomï¼š"å†æƒ³æƒ³ï¼Œç»™æˆ‘ä¸€ä¸ªæ›´ç¨³çš„æ–¹æ¡ˆã€‚"`,
                            positive: false
                        }
                    },
                    {
                        text: "6ä¸ªæœˆï¼Œç¨³å¥ç­–ç•¥",
                        detail: "åˆ†æ‰¹æŠ•æ”¾ï¼ŒæŒç»­ä¼˜åŒ–",
                        effects: {},
                        feedback: {
                            title: "âš ï¸ å¤ªæ…¢",
                            text: `Tomçš±çœ‰ï¼š"6ä¸ªæœˆå¤ªæ…¢äº†ã€‚"

"åˆ›ä¸šå…¬å¸çš„çª—å£æœŸå¾ˆçŸ­ï¼š
- ç«å“åœ¨è¿›åŒ–
- å¸‚åœºåœ¨å˜åŒ–
- æˆ‘ä»¬çš„ç°é‡‘åªèƒ½æ’‘3-4ä¸ªæœˆ

6ä¸ªæœˆæ„å‘³ç€æˆ‘è¿˜è¦å†æŠ•é’±æ‰èƒ½çœ‹åˆ°å›æŠ¥ã€‚"

Sarahæé†’ï¼š"æŠ•èµ„äººè¦çš„æ˜¯åˆç†çš„é€Ÿåº¦ï¼Œä¸æ˜¯ç»å¯¹å®‰å…¨ã€‚"

Tomï¼š"3-4ä¸ªæœˆæ˜¯åˆç†åŒºé—´ã€‚å†æƒ³æƒ³ï¼Ÿ"`,
                            positive: false
                        }
                    }
                ],
                next: -1
            }
        ];

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            loadStep(0);
            updateResources();
            updateProgress();
            addEvent("æ¸¸æˆå¼€å§‹ - å±æœºæ¨¡å¼");
        }

        // åŠ è½½æ­¥éª¤
        function loadStep(stepIndex) {
            if (stepIndex >= gameFlow.length) {
                return;
            }

            const step = gameFlow[stepIndex];
            gameState.currentStep = stepIndex;

            // æ›´æ–°åœºæ™¯
            document.getElementById('scenario-title').innerHTML =
                `ç¬¬${stepIndex + 1}å…³ï¼š${step.scenario.split('\n')[0].replace(/\*/g, '')}`;
            document.getElementById('scenario-text').textContent = step.scenario;

            // æ›´æ–°é—®é¢˜
            document.getElementById('step-number').textContent = stepIndex + 1;
            document.getElementById('question-text').textContent = step.question;

            // æ¸…ç©ºåé¦ˆ
            document.getElementById('feedback-container').innerHTML = '';

            // ç”Ÿæˆé€‰é¡¹
            const choicesContainer = document.getElementById('choices-container');
            choicesContainer.innerHTML = `<div class="choices"></div>`;
            const choicesDiv = choicesContainer.querySelector('.choices');

            step.choices.forEach((choice, index) => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.innerHTML = `
                    <div style="font-weight: bold;">${choice.text}</div>
                    <div class="choice-detail">${choice.detail}</div>
                `;
                btn.onclick = () => makeChoice(stepIndex, index);
                choicesDiv.appendChild(btn);
            });

            updateProgress();
        }

        // åšå‡ºé€‰æ‹©
        function makeChoice(stepIndex, choiceIndex) {
            const step = gameFlow[stepIndex];
            const choice = step.choices[choiceIndex];

            // è®°å½•å†³ç­–
            gameState.decisions.push({
                step: stepIndex,
                choice: choiceIndex,
                text: choice.text
            });

            // åº”ç”¨æ•ˆæœ
            if (choice.effects) {
                applyEffects(choice.effects);
            }

            // ç¦ç”¨æ‰€æœ‰æŒ‰é’®
            document.querySelectorAll('.choice-btn').forEach(btn => {
                btn.disabled = true;
            });

            // æ˜¾ç¤ºåé¦ˆ
            showFeedback(choice.feedback);

            // æ·»åŠ äº‹ä»¶
            addEvent(`å†³ç­–ï¼š${choice.text}`);
        }

        // åº”ç”¨æ•ˆæœ
        function applyEffects(effects) {
            if (effects.budget !== undefined) {
                gameState.budget += effects.budget;
                updateResources();
            }
            if (effects.users !== undefined) {
                gameState.users += effects.users;
                updateResources();
            }
            if (effects.retention !== undefined) {
                gameState.retention += effects.retention;
                updateResources();
            }
            if (effects.morale !== undefined) {
                gameState.morale += effects.morale;
                updateResources();
            }
        }

        // æ˜¾ç¤ºåé¦ˆ
        function showFeedback(feedback) {
            const container = document.getElementById('feedback-container');
            const feedbackDiv = document.createElement('div');
            feedbackDiv.className = `feedback ${!feedback.positive ? 'negative' : ''}`;

            feedbackDiv.innerHTML = `
                <div class="feedback-title">${feedback.title}</div>
                <div class="feedback-text">${feedback.text.replace(/\n/g, '<br>')}</div>
                ${!feedback.end ? '<button class="continue-btn" onclick="continueGame()">ç»§ç»­ â†’</button>' : ''}
            `;

            container.appendChild(feedbackDiv);
        }

        // ç»§ç»­æ¸¸æˆ
        function continueGame() {
            const nextStep = gameFlow[gameState.currentStep].next;
            if (nextStep >= 0) {
                loadStep(nextStep);
                window.scrollTo(0, 0);
            }
        }

        // æ›´æ–°èµ„æºæ˜¾ç¤º
        function updateResources() {
            document.getElementById('budget').textContent = `$${gameState.budget.toLocaleString()}`;
            document.getElementById('users').textContent = gameState.users.toLocaleString();
            document.getElementById('retention').textContent = gameState.retention + '%';

            document.getElementById('cash-display').textContent = `$${gameState.budget.toLocaleString()}`;
            document.getElementById('cash-bar').style.width = Math.max(0, (gameState.budget / 15000) * 100) + '%';

            document.getElementById('growth-display').textContent = gameState.growth + '%/å¤©';
            document.getElementById('growth-bar').style.width = Math.max(0, gameState.growth + 50) + '%';

            document.getElementById('morale-display').textContent = gameState.morale + '%';
            document.getElementById('morale-bar').style.width = gameState.morale + '%';
        }

        // æ›´æ–°è¿›åº¦
        function updateProgress() {
            const container = document.getElementById('progress-steps');
            container.innerHTML = gameFlow.map((step, index) => {
                let status = '';
                if (index < gameState.currentStep) status = 'completed';
                else if (index === gameState.currentStep) status = 'active';

                return `
                    <div class="progress-step">
                        <div class="step-number ${status}">${index + 1}</div>
                        <span>ç¬¬${index + 1}å…³</span>
                    </div>
                `;
            }).join('');
        }

        // æ·»åŠ äº‹ä»¶
        function addEvent(text) {
            const container = document.getElementById('events-list');
            const time = new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });

            const eventDiv = document.createElement('div');
            eventDiv.className = 'event-item';
            eventDiv.innerHTML = `
                <div class="event-time">${time}</div>
                ${text}
            `;

            container.insertBefore(eventDiv, container.firstChild);

            // æœ€å¤šä¿ç•™5æ¡
            while (container.children.length > 5) {
                container.removeChild(container.lastChild);
            }
        }

        // åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
