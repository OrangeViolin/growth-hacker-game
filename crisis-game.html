<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¢é•¿å±æœºï¼šç”Ÿå­˜æ¸¸æˆ | Growth Crisis Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Georgia, 'Source Han Serif SC', 'Noto Serif SC', serif;
            background: linear-gradient(135deg, #2C1810 0%, #1A0F0A 100%);
            min-height: 100vh;
            color: #E8DCC4;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #8B0000 0%, #4A0000 100%);
            padding: 20px 30px;
            border-radius: 15px 15px 0 0;
            border-bottom: 3px solid #C9A961;
            box-shadow: 0 0 30px rgba(201, 169, 97, 0.3);
        }

        .header h1 {
            font-size: 2em;
            color: #C9A961;
            text-shadow: 0 0 10px rgba(201, 169, 97, 0.5);
        }

        .status-bar {
            display: flex;
            gap: 30px;
            margin-top: 15px;
            font-size: 0.9em;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-value {
            font-weight: bold;
            color: #C9A961;
            font-size: 1.1em;
        }

        .crisis-level {
            color: #FF4444;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .game-area {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 0;
            background: #1A1410;
            border-radius: 0 0 15px 15px;
            min-height: 600px;
            max-height: calc(100vh - 200px);
        }

        .dialogue-area {
            display: flex;
            flex-direction: column;
            border-right: 2px solid #C9A961;
            height: 100%;
        }

        .messages {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 30px;
            background: linear-gradient(180deg, #1A1410 0%, #2C1810 100%);
        }

        .message {
            margin-bottom: 25px;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.ai {
            text-align: left;
        }

        .message.user {
            text-align: right;
        }

        .message-bubble {
            display: inline-block;
            max-width: 80%;
            padding: 20px;
            border-radius: 15px;
            line-height: 1.8;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .message.ai .message-bubble {
            background: linear-gradient(135deg, #3A2010 0%, #2A1810 100%);
            border-left: 4px solid #C9A961;
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, #1A3A2A 0%, #0A2A1A 100%);
            border-right: 4px solid #4A9A6A;
        }

        .message-sender {
            font-size: 0.85em;
            margin-bottom: 8px;
            color: #C9A961;
            font-weight: bold;
        }

        .crisis-tag {
            display: inline-block;
            background: #8B0000;
            color: #FFD700;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: 10px;
        }

        .input-area {
            padding: 20px;
            background: #2C1810;
            border-top: 2px solid #C9A961;
        }

        .input-container {
            display: flex;
            gap: 15px;
        }

        #user-input {
            flex: 1;
            padding: 15px;
            background: #1A1410;
            border: 2px solid #C9A961;
            border-radius: 10px;
            color: #E8DCC4;
            font-family: inherit;
            font-size: 1em;
            resize: none;
            height: 80px;
        }

        #user-input:focus {
            outline: none;
            border-color: #FFD700;
            box-shadow: 0 0 15px rgba(201, 169, 97, 0.3);
        }

        .send-btn {
            background: linear-gradient(135deg, #C9A961 0%, #A08040 100%);
            color: #1A1410;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(201, 169, 97, 0.5);
        }

        .send-btn:active {
            transform: translateY(0);
        }

        .sidebar {
            background: #2C1810;
            padding: 25px;
            overflow-y: auto;
        }

        .sidebar h3 {
            color: #C9A961;
            margin-bottom: 15px;
            font-size: 1.1em;
            border-bottom: 2px solid #C9A961;
            padding-bottom: 10px;
        }

        .resources {
            margin-bottom: 30px;
        }

        .resource-item {
            background: #1A1410;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 3px solid #C9A961;
        }

        .resource-label {
            font-size: 0.85em;
            color: #A08040;
            margin-bottom: 5px;
        }

        .resource-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #E8DCC4;
        }

        .resource-bar {
            height: 6px;
            background: #3A2010;
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }

        .resource-fill {
            height: 100%;
            background: linear-gradient(90deg, #C9A961 0%, #FFD700 100%);
            transition: width 0.5s;
        }

        .events {
            margin-top: 30px;
        }

        .event-item {
            background: #3A2010;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 0.9em;
            border-left: 3px solid #8B0000;
        }

        .event-time {
            font-size: 0.8em;
            color: #A08040;
            margin-bottom: 5px;
        }

        .choices {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .choice-btn {
            background: #3A2010;
            border: 2px solid #C9A961;
            color: #E8DCC4;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
        }

        .choice-btn:hover {
            background: #C9A961;
            color: #1A1410;
            transform: translateY(-2px);
        }

        .typing {
            display: inline-block;
            color: #C9A961;
        }

        .typing::after {
            content: '...';
            animation: typing 1.5s infinite;
        }

        @keyframes typing {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>âš ï¸ å¢é•¿å±æœºï¼šç”Ÿå­˜æ¸¸æˆ</h1>
            <div class="status-bar">
                <div class="status-item">
                    <span>ğŸ“… å¤©æ•°ï¼š</span>
                    <span class="status-value" id="days">ç¬¬1å¤©</span>
                </div>
                <div class="status-item">
                    <span>ğŸ’° é¢„ç®—ï¼š</span>
                    <span class="status-value" id="budget">$10,000</span>
                </div>
                <div class="status-item">
                    <span>ğŸ‘¥ ç”¨æˆ·ï¼š</span>
                    <span class="status-value" id="users">5,000</span>
                </div>
                <div class="status-item">
                    <span>âš ï¸ å±æœºç­‰çº§ï¼š</span>
                    <span class="status-value crisis-level" id="crisis">æé™</span>
                </div>
            </div>
        </div>

        <div class="game-area">
            <div class="dialogue-area">
                <div class="messages" id="messages">
                    <!-- Messages will be added here -->
                </div>
                <div class="input-area">
                    <div class="input-container">
                        <textarea
                            id="user-input"
                            placeholder="è¾“å…¥ä½ çš„å†³ç­–å’Œè¡ŒåŠ¨..."
                            onkeydown="if(event.key==='Enter' && !event.shiftKey){event.preventDefault();sendMessage();}"
                        ></textarea>
                        <button class="send-btn" onclick="sendMessage()">å‘é€</button>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="resources">
                    <h3>ğŸ“Š èµ„æºçŠ¶å†µ</h3>
                    <div class="resource-item">
                        <div class="resource-label">ç°é‡‘æµ</div>
                        <div class="resource-value" id="cash-value">$10,000</div>
                        <div class="resource-bar">
                            <div class="resource-fill" id="cash-bar" style="width: 100%"></div>
                        </div>
                    </div>
                    <div class="resource-item">
                        <div class="resource-label">æ—¥æ´»ç”¨æˆ· (DAU)</div>
                        <div class="resource-value" id="dau-value">5,000</div>
                        <div class="resource-bar">
                            <div class="resource-fill" id="dau-bar" style="width: 50%"></div>
                        </div>
                    </div>
                    <div class="resource-item">
                        <div class="resource-label">å›¢é˜Ÿå£«æ°”</div>
                        <div class="resource-value" id="morale-value">60%</div>
                        <div class="resource-bar">
                            <div class="resource-fill" id="morale-bar" style="width: 60%"></div>
                        </div>
                    </div>
                    <div class="resource-item">
                        <div class="resource-label">ç”¨æˆ·ç•™å­˜ç‡</div>
                        <div class="resource-value" id="retention-value">35%</div>
                        <div class="resource-bar">
                            <div class="resource-fill" id="retention-bar" style="width: 35%"></div>
                        </div>
                    </div>
                </div>

                <div class="events">
                    <h3>ğŸ“° æœ€æ–°äº‹ä»¶</h3>
                    <div id="event-list">
                        <div class="event-item">
                            <div class="event-time">åˆšåˆš</div>
                            æ¸¸æˆå¼€å§‹...
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        const gameState = {
            day: 1,
            budget: 10000,
            users: 5000,
            dau: 5000,
            morale: 60,
            retention: 35,
            scenario: 'crisis1',
            events: [],
            decisions: []
        };

        // å±æœºåœºæ™¯åº“
        const scenarios = {
            crisis1: {
                title: "ç”¨æˆ·æš´è·Œå±æœº",
                intro: `ä½ æ˜¯ä¸€ä¸ªå¥èº«Appçš„å¢é•¿è´Ÿè´£äººã€‚

æ˜¨å¤©æ™šä¸Šï¼Œç«å“FitnessProçªç„¶å®£å¸ƒå…è´¹å¼€æ”¾æ‰€æœ‰ä»˜è´¹åŠŸèƒ½ã€‚

**ç°çŠ¶ï¼š**
- ä½ çš„Appç”¨æˆ·ä»1ä¸‡æ‰åˆ°5000ï¼ˆè¿‡å»24å°æ—¶ï¼‰
- æ¯å¤©è¿˜åœ¨ä»¥20%é€Ÿåº¦æµå¤±
- é“¶è¡Œè´¦æˆ·å‰©ä½™$10,000
- å›¢é˜Ÿ6äººï¼Œå·¥èµ„æ¯æœˆ$18,000
- æŠ•èµ„äººç»™ä½ 2å‘¨æ—¶é—´è¯æ˜äº§å“è¿˜æœ‰ä»·å€¼

**æé™æ¡ä»¶ï¼š**
- é¢„ç®—ä¸¥é‡ä¸è¶³
- æ—¶é—´ç´§è¿«
- å›¢é˜Ÿå£«æ°”ä½è½
- ç«å“æŒç»­æ–½å‹

ä½ ä¼šæ€ä¹ˆåšï¼Ÿ`,
                hints: [
                    "æ€è€ƒï¼šç«å“å…è´¹äº†ï¼Œä½ çš„å·®å¼‚åŒ–åœ¨å“ªï¼Ÿ",
                    "é¢„ç®—æœ‰é™ï¼Œå“ªç§å¢é•¿æ–¹å¼ROIæœ€é«˜ï¼Ÿ",
                    "2å‘¨å†…ï¼Œä»€ä¹ˆæŒ‡æ ‡èƒ½è¯´æœæŠ•èµ„äººï¼Ÿ"
                ]
            }
        };

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            addAIMessage(scenarios.crisis1.intro, 'å±æœºè­¦æŠ¥');
            addEvent('æ¸¸æˆå¼€å§‹ - å±æœºæ¨¡å¼æ¿€æ´»');
        }

        // æ·»åŠ AIæ¶ˆæ¯
        function addAIMessage(text, tag = null) {
            const messagesDiv = document.getElementById('messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';

            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';

            const sender = document.createElement('div');
            sender.className = 'message-sender';
            sender.innerHTML = `ğŸ¯ å¯¼å¸ˆ${tag ? `<span class="crisis-tag">${tag}</span>` : ''}`;

            const content = document.createElement('div');
            content.style.whiteSpace = 'pre-wrap';
            content.textContent = text;

            bubble.appendChild(sender);
            bubble.appendChild(content);
            messageDiv.appendChild(bubble);
            messagesDiv.appendChild(messageDiv);

            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
        function addUserMessage(text) {
            const messagesDiv = document.getElementById('messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';

            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';

            const sender = document.createElement('div');
            sender.className = 'message-sender';
            sender.textContent = 'ğŸ’¼ ä½ ';

            const content = document.createElement('div');
            content.style.whiteSpace = 'pre-wrap';
            content.textContent = text;

            bubble.appendChild(sender);
            bubble.appendChild(content);
            messageDiv.appendChild(bubble);
            messagesDiv.appendChild(messageDiv);

            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        // å‘é€æ¶ˆæ¯
        function sendMessage() {
            const input = document.getElementById('user-input');
            const message = input.value.trim();

            if (!message) return;

            addUserMessage(message);
            input.value = '';

            // ä¿å­˜å†³ç­–
            gameState.decisions.push({
                day: gameState.day,
                decision: message,
                timestamp: Date.now()
            });

            // AIå“åº”
            setTimeout(() => {
                processDecision(message);
            }, 1000);
        }

        // å¤„ç†å†³ç­–
        function processDecision(decision) {
            const response = generateAIResponse(decision);
            addAIMessage(response.text);

            // æ›´æ–°æ¸¸æˆçŠ¶æ€
            if (response.effects) {
                applyEffects(response.effects);
            }

            // æ¨è¿›æ¸¸æˆ
            if (response.nextEvent) {
                setTimeout(() => {
                    triggerEvent(response.nextEvent);
                }, 2000);
            }
        }

        // ç”ŸæˆAIå“åº”
        function generateAIResponse(decision) {
            const lowerDecision = decision.toLowerCase();

            // åˆ†æå†³ç­–ç±»å‹
            if (lowerDecision.includes('ç—…æ¯’') || lowerDecision.includes('æ¨è') || lowerDecision.includes('é‚€è¯·')) {
                return {
                    text: `**å†³ç­–åˆ†æï¼šæ¨èç³»ç»Ÿ**

æœ‰æ„æ€çš„æ–¹å‘ï¼ä½†è®©æˆ‘ä»¬ç®—ä¸€ç¬”è´¦ï¼š

å½“å‰çŠ¶å†µï¼š
- 5000ä¸ªæ´»è·ƒç”¨æˆ·
- å‡è®¾æ¯äººé‚€è¯·2ä¸ªæœ‹å‹
- è½¬åŒ–ç‡éœ€è¦å¤šå°‘æ‰èƒ½æ­¢è¡€ï¼Ÿ

**é—®é¢˜ï¼š**
ä½ çš„ç—…æ¯’ç³»æ•°Kå€¼ç›®æ ‡æ˜¯å¤šå°‘ï¼Ÿ
ç°åœ¨æµå¤±ç‡20%/å¤©ï¼Œæ„å‘³ç€æ¯å¤©å¤±å»1000ç”¨æˆ·
æ¨èç³»ç»Ÿèƒ½åœ¨24å°æ—¶å†…å¸¦æ¥1000+æ–°ç”¨æˆ·å—ï¼Ÿ

**èµ„æºæ¶ˆè€—ï¼š**
- å¼€å‘æ¨èåŠŸèƒ½ï¼š$3000ï¼ˆå¤–åŒ…ï¼‰æˆ– 3å¤©ï¼ˆå†…éƒ¨ï¼‰
- æ¿€åŠ±æœºåˆ¶ï¼š$2000ï¼ˆé¦–æ‰¹å¥–åŠ±ï¼‰

æ—¶é—´ç´§è¿«ï¼Œç»§ç»­è¿™ä¸ªæ–¹å‘è¿˜æ˜¯è°ƒæ•´ç­–ç•¥ï¼Ÿ`,
                    effects: {
                        budget: -1000, // åˆæ­¥è°ƒç ”æˆæœ¬
                        morale: 5 // å›¢é˜Ÿçœ‹åˆ°æ–¹å‘
                    },
                    nextEvent: 'viral_challenge'
                };
            }

            if (lowerDecision.includes('ç•™å­˜') || lowerDecision.includes('æ¿€æ´»') || lowerDecision.includes('åŠŸèƒ½')) {
                return {
                    text: `**å†³ç­–åˆ†æï¼šæå‡ç•™å­˜**

èªæ˜ï¼åœ¨æµå¤±ä¸¥é‡æ—¶ï¼Œç•™å­˜æ¯”è·å®¢æ›´é‡è¦ã€‚

**æ•°æ®åˆ†æï¼š**
å½“å‰ç•™å­˜ç‡35%ï¼ˆD7ï¼‰
- è¿™æ„å‘³ç€100ä¸ªæ–°ç”¨æˆ·ï¼Œ7å¤©ååªå‰©35ä¸ª
- ç«å“å…è´¹åï¼Œç•™å­˜æ‰åˆ°35%

**å…³é”®é—®é¢˜ï¼š**
1. ä¸ºä»€ä¹ˆç”¨æˆ·ç¦»å¼€ï¼Ÿï¼ˆåšè¿‡ç”¨æˆ·è®¿è°ˆå—ï¼Ÿï¼‰
2. ä½ çš„æ ¸å¿ƒä»·å€¼æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆvs ç«å“ï¼‰
3. ä»€ä¹ˆåŠŸèƒ½èƒ½è®©ç”¨æˆ·"ç¦»ä¸å¼€"ï¼Ÿ

**å¿«é€Ÿæ–¹æ¡ˆï¼š**
A. æ·±åº¦è®¿è°ˆæµå¤±ç”¨æˆ·ï¼ˆæˆæœ¬ä½ï¼Œ2å¤©ï¼‰
B. æ•°æ®åˆ†ææ‰¾åˆ°"é­”æ³•æ—¶åˆ»"ï¼ˆ1å¤©ï¼‰
C. å¿«é€Ÿè¿­ä»£æ ¸å¿ƒåŠŸèƒ½ï¼ˆ3-5å¤©ï¼‰

å…·ä½“æƒ³æ€ä¹ˆåšï¼Ÿ`,
                    effects: {
                        morale: 10, // æ­£ç¡®æ–¹å‘
                        retention: 2
                    }
                };
            }

            if (lowerDecision.includes('å…è´¹') || lowerDecision.includes('é™ä»·') || lowerDecision.includes('ä»·æ ¼')) {
                return {
                    text: `**å†³ç­–åˆ†æï¼šä»·æ ¼ç­–ç•¥**

âš ï¸ å±é™©ä¿¡å·ï¼

ç«å“å·²ç»å…è´¹äº†ï¼Œä½ è·Ÿè¿›å…è´¹æ„å‘³ç€ï¼š
- æ”¶å…¥å½’é›¶
- é¢„ç®—$10,000æ’‘ä¸è¿‡1ä¸ªæœˆ
- æŠ•èµ„äººä¼šè´¨ç–‘å•†ä¸šæ¨¡å¼

**åå‘æ€è€ƒï¼š**
ä¸ºä»€ä¹ˆä¸èƒ½æ¯”ç«å“æ›´è´µï¼Ÿ

æ¡ˆä¾‹ï¼šNetflix vs å…è´¹è§†é¢‘ç½‘ç«™
- Netflixæ›´è´µï¼Œä½†ï¼š
  - æ— å¹¿å‘Š
  - åŸåˆ›å†…å®¹
  - æ›´å¥½ä½“éªŒ

**é—®é¢˜ï¼š**
ä½ èƒ½æä¾›ä»€ä¹ˆä»·å€¼ï¼Œè®©ç”¨æˆ·æ„¿æ„ä»˜è´¹ï¼Ÿ
æœ‰æ²¡æœ‰å¯èƒ½åš"é«˜ç«¯å¥èº«App"è€Œä¸æ˜¯"å…è´¹App"ï¼Ÿ

é‡æ–°æ€è€ƒå®šä½ï¼Ÿ`,
                    effects: {
                        budget: -500,
                        morale: -5
                    }
                };
            }

            if (lowerDecision.includes('è£å‘˜') || lowerDecision.includes('å‰Šå‡')) {
                return {
                    text: `**å†³ç­–åˆ†æï¼šæˆæœ¬å‰Šå‡**

ç†æ€§ä½†å±é™©çš„é€‰æ‹©ã€‚

**è®¡ç®—ï¼š**
- å›¢é˜Ÿ6äººï¼Œæœˆè–ª$18,000
- è£æ‰2äººçœ$6,000/æœˆ
- ä½†å‰©4äººèƒ½å®Œæˆ2å‘¨çš„å¤§è½¬å‹å—ï¼Ÿ

**é£é™©ï¼š**
- å£«æ°”æš´è·Œ
- å…³é”®èƒ½åŠ›æµå¤±
- å‰©ä½™æˆå‘˜å¯èƒ½ä¹Ÿå¼€å§‹æ‰¾å·¥ä½œ

**æ›¿ä»£æ–¹æ¡ˆï¼š**
- å…¨å‘˜é™è–ª20%ï¼Œä½†ç»™æœŸæƒ
- æš‚æ—¶åœå‘è–ªæ°´ï¼Œæ‰¿è¯ºèèµ„åè¡¥å‘
- è®©å›¢é˜Ÿå‚ä¸å†³ç­–ï¼Œå…±æ¸¡éš¾å…³

è¿˜æ˜¯è¦è£å‘˜ï¼Ÿå…·ä½“æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ`,
                    effects: {
                        morale: -20
                    }
                };
            }

            // é»˜è®¤å“åº”
            return {
                text: `**å¯¼å¸ˆåé¦ˆï¼š**

æˆ‘å¬åˆ°äº†ä½ çš„æƒ³æ³•ï¼š"${decision}"

è®©æˆ‘ä»¬æ·±å…¥åˆ†æï¼š

**å…³é”®é—®é¢˜ï¼š**
1. è¿™ä¸ªæ–¹æ¡ˆéœ€è¦å¤šå°‘é¢„ç®—ï¼Ÿ
2. éœ€è¦å¤šé•¿æ—¶é—´è§æ•ˆï¼Ÿ
3. é¢„æœŸæ•ˆæœæ˜¯ä»€ä¹ˆï¼ˆå…·ä½“æ•°å­—ï¼‰ï¼Ÿ

è®°ä½ä½ çš„çº¦æŸï¼š
- â° 14å¤©å€’è®¡æ—¶
- ğŸ’° $10,000é¢„ç®—
- ğŸ“‰ æ¯å¤©æµå¤±20%ç”¨æˆ·

èƒ½å¦å…·ä½“è¯´è¯´ï¼š
- å…·ä½“æ‰§è¡Œæ­¥éª¤ï¼Ÿ
- éœ€è¦çš„èµ„æºï¼Ÿ
- æˆåŠŸçš„è¡¡é‡æ ‡å‡†ï¼Ÿ

å†è¯¦ç»†ç‚¹ï¼`,
                effects: {
                    morale: 2
                }
            };
        }

        // åº”ç”¨æ•ˆæœ
        function applyEffects(effects) {
            if (effects.budget) {
                gameState.budget += effects.budget;
                updateResource('budget', gameState.budget);
                addEvent(`é¢„ç®—å˜åŠ¨: ${effects.budget > 0 ? '+' : ''}$${effects.budget}`);
            }

            if (effects.users) {
                gameState.users += effects.users;
                gameState.dau += effects.users;
                updateResource('users', gameState.users);
                updateResource('dau', gameState.dau);
                addEvent(`ç”¨æˆ·å˜åŠ¨: ${effects.users > 0 ? '+' : ''}${effects.users}`);
            }

            if (effects.morale) {
                gameState.morale = Math.max(0, Math.min(100, gameState.morale + effects.morale));
                updateResource('morale', gameState.morale);
            }

            if (effects.retention) {
                gameState.retention = Math.max(0, Math.min(100, gameState.retention + effects.retention));
                updateResource('retention', gameState.retention);
            }
        }

        // æ›´æ–°èµ„æºæ˜¾ç¤º
        function updateResource(type, value) {
            if (type === 'budget') {
                document.getElementById('budget').textContent = `$${value.toLocaleString()}`;
                document.getElementById('cash-value').textContent = `$${value.toLocaleString()}`;
                document.getElementById('cash-bar').style.width = Math.max(0, (value / 10000) * 100) + '%';
            } else if (type === 'users' || type === 'dau') {
                document.getElementById('users').textContent = value.toLocaleString();
                document.getElementById('dau-value').textContent = value.toLocaleString();
                document.getElementById('dau-bar').style.width = Math.max(0, (value / 10000) * 100) + '%';
            } else if (type === 'morale') {
                document.getElementById('morale-value').textContent = value + '%';
                document.getElementById('morale-bar').style.width = value + '%';
            } else if (type === 'retention') {
                document.getElementById('retention-value').textContent = value + '%';
                document.getElementById('retention-bar').style.width = value + '%';
            }
        }

        // æ·»åŠ äº‹ä»¶
        function addEvent(text) {
            const eventList = document.getElementById('event-list');
            const eventDiv = document.createElement('div');
            eventDiv.className = 'event-item';

            const time = new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
            eventDiv.innerHTML = `
                <div class="event-time">${time}</div>
                ${text}
            `;

            eventList.insertBefore(eventDiv, eventList.firstChild);

            // æœ€å¤šä¿ç•™5æ¡äº‹ä»¶
            while (eventList.children.length > 5) {
                eventList.removeChild(eventList.lastChild);
            }
        }

        // è§¦å‘æ–°äº‹ä»¶
        function triggerEvent(eventType) {
            // è¿™é‡Œå¯ä»¥æ·»åŠ éšæœºäº‹ä»¶ã€åç»­æŒ‘æˆ˜ç­‰
            addEvent(`æ–°äº‹ä»¶è§¦å‘: ${eventType}`);
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
